window["%hammerhead%"].utils.removeInjectedScript(),function hh(fh){var dh=fh.document;!function(m,e,g,i){var p="default"in m?m.default:m;e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e;var y="default"in g?g.default:g;i=i&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i;var n=p.nativeMethods,o=/^((mouse\w+)|((dbl)?click)|(contextmenu))$/,r=/^((drag\w*)|(drop))$/,s=/^key\w+$/,l=/^(before)?input$/,a=/^(blur|(focus(in|out)?))$/,u=/^pointer\w+/,c={click:1,dblclick:2,mousedown:1,mouseup:1},h="MouseEvent",f="PointerEvent",d="KeyboardEvent",v="InputEvent",E="FocusEvent",t=(b.prototype.run=function(){var t=this.options,e=t.bubbles,n=t.cancelable,i=t.detail,o=(t.view,t.buttons),e=!1!==e,n=!1!==n,i=i||c[this.eventName],o=void 0===o?1:o;Object.assign(this.options,{bubbles:e,cancelable:n,detail:i,view:fh,buttons:o});var r,s=b._getEventCtorByEventType(this.eventName,this.options.eventConstructor);s&&(r=new s(this.eventName,this.options),this.element.dispatchEvent(r))},b._getEventCtorByEventType=function(t,e){if(e&&"function"==typeof b._getEventCtorFromWindow(e)){var n=b._getEventCtorFromNativeMethods(e);if(n&&"function"==typeof n)return n}return o.test(t)||r.test(t)?b._getEventCtorFromNativeMethods(h):u.test(t)?b._getEventCtorFromNativeMethods(f):s.test(t)?b._getEventCtorFromNativeMethods(d):l.test(t)?b._getEventCtorFromNativeMethods(v):a.test(t)?b._getEventCtorFromNativeMethods(E):b._getEventCtorFromNativeMethods("CustomEvent")},b._getEventCtorFromNativeMethods=function(t){return n["Window"+t]||b._getEventCtorFromWindow(t)},b._getEventCtorFromWindow=function(t){return fh[t]},b);function b(t,e,n){this.element=t,this.eventName=e,this.options=n}var S=function(t,e){return(S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function _(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}S(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function w(t,s,l,a){return new(l=l||e)(function(n,e){function i(t){try{r(a.next(t))}catch(t){e(t)}}function o(t){try{r(a.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?n(t.value):((e=t.value)instanceof l?e:new l(function(t){t(e)})).then(i,o)}r((a=a.apply(t,s||[])).next())})}function P(n,i){var o,r,s,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return l.label++,{value:e[1],done:!1};case 5:l.label++,r=e[1],e=[0];continue;case 7:e=l.ops.pop(),l.trys.pop();continue;default:if(!(s=0<(s=l.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){l=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){l.label=e[1];break}if(6===e[0]&&l.label<s[1]){l.label=s[1],s=e;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(e);break}s[2]&&l.ops.pop(),l.trys.pop();continue}e=i.call(n,l)}catch(t){e=[6,t],r=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var x=(C.create=function(t){return"left"in t?new C(t.left,t.top):"right"in t?new C(t.right,t.bottom):new C(t.x,t.y)},C.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},C.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},C.prototype.round=function(t){return void 0===t&&(t=Math.round),this.x=t(this.x),this.y=t(this.y),this},C.prototype.eql=function(t){return this.x===t.x&&this.y===t.y},C.prototype.mul=function(t){return this.x*=t,this.y*=t,this},C.prototype.distance=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},C);function C(t,e){this.x=t,this.y=e}function A(t){var e="array"+t.charAt(0).toUpperCase()+t.slice(1),n=m.nativeMethods[e];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.call.apply(n,t)}}A("filter"),A("map"),A("slice"),A("splice"),A("unshift"),A("forEach"),A("indexOf");var T=A("some"),M=(A("reverse"),A("reduce"),A("concat"),A("join"),p.utils.browser,p.nativeMethods),D=(p.utils.style.get,p.utils.dom.getActiveElement,p.utils.dom.findDocument),U=p.utils.dom.find,I=(p.utils.dom.isElementInDocument,p.utils.dom.isElementInIframe),k=p.utils.dom.getIframeByElement,B=(p.utils.dom.isCrossDomainWindows,p.utils.dom.getSelectParent,p.utils.dom.getChildVisibleIndex,p.utils.dom.getSelectVisibleChildren,p.utils.dom.isElementNode),O=(p.utils.dom.isTextNode,p.utils.dom.isRenderedNode,p.utils.dom.isIframeElement,p.utils.dom.isInputElement,p.utils.dom.isButtonElement,p.utils.dom.isFileInput,p.utils.dom.isTextAreaElement,p.utils.dom.isAnchorElement,p.utils.dom.isImgElement),N=(p.utils.dom.isFormElement,p.utils.dom.isLabelElement,p.utils.dom.isSelectElement,p.utils.dom.isRadioButtonElement,p.utils.dom.isColorInputElement,p.utils.dom.isCheckboxElement,p.utils.dom.isOptionElement,p.utils.dom.isSVGElement,p.utils.dom.isMapElement,p.utils.dom.isBodyElement),F=p.utils.dom.isHtmlElement,L=(p.utils.dom.isDocument,p.utils.dom.isWindow,p.utils.dom.isTextEditableInput,p.utils.dom.isTextEditableElement,p.utils.dom.isTextEditableElementAndEditingAllowed,p.utils.dom.isContentEditableElement,p.utils.dom.isDomElement,p.utils.dom.isShadowUIElement,p.utils.dom.isShadowRoot,p.utils.dom.isElementFocusable,p.utils.dom.isHammerheadAttr,p.utils.dom.isElementReadOnly,p.utils.dom.getScrollbarSize),Y=(p.utils.dom.getMapContainer,p.utils.dom.getTagName),R=p.utils.dom.closest,K=p.utils.dom.getParents,W=p.utils.dom.findParent;function V(t,e){return t.contains?t.contains(e):T(t,function(t){return t.contains(e)})}function X(t){return M.nodeTextContentGetter.call(t)}p.utils.dom.getTopSameDomainWindow,p.utils.dom.getParentExceptShadowRoot;var H=(q.create=function(t){return new q(t.top,t.right,t.bottom,t.left)},q.prototype.add=function(t){return this.top+=t.top,this.right+=t.right,this.bottom+=t.bottom,this.left+=t.left,this},q.prototype.sub=function(t){return"top"in t&&(this.top-=t.top,this.left-=t.left),this.bottom-=t.bottom,this.right-=t.right,this},q.prototype.round=function(t,e){return void 0===t&&(t=Math.round),void 0===e&&(e=t),this.top=t(this.top),this.right=e(this.right),this.bottom=e(this.bottom),this.left=t(this.left),this},q.prototype.contains=function(t){return t.x>=this.left&&t.x<=this.right&&t.y>=this.top&&t.y<=this.bottom},q);function q(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),this.top=t,this.right=e,this.bottom=n,this.left=i}var G=p.utils.style,z=p.utils.style.getBordersWidth,j=(p.utils.style.getComputedStyle,p.utils.style.getElementMargin,p.utils.style.getElementPadding),$=p.utils.style.getElementScroll,Q=(p.utils.style.getOptionHeight,p.utils.style.getSelectElementSize,p.utils.style.isElementVisible,p.utils.style.isVisibleChild,p.utils.style.getWidth),Z=p.utils.style.getHeight,J=p.utils.style.getInnerWidth,tt=p.utils.style.getInnerHeight,et=p.utils.style.getScrollLeft,nt=p.utils.style.getScrollTop,it=p.utils.style.setScrollLeft,ot=p.utils.style.setScrollTop,rt=p.utils.style.get;function st(t){return B(t)&&"fixed"===G.get(t,"position")}var lt=function(t,e,n,i,o,r){this.width=t,this.height=e,this.left=n.x,this.top=n.y,this.right=n.x+t,this.bottom=n.y+e,this.border=i,this.scrollbar=r,this.scroll=o},at=p.utils.position.getElementRectangle,ut=p.utils.position.getOffsetPosition,ct=p.utils.position.offsetToClientCoords;function ht(t){var e,n,i,o,r=F(t),s=r?t.getElementsByTagName("body")[0]:null,l=t.getBoundingClientRect(),a=H.create(z(t)),u=$(t),c=I(t),h="BackCompat"===t.ownerDocument.compatMode,f=r?new x(0,0):x.create(l),d=l.height,m=l.width;r&&(m=s&&h?(d=s.clientHeight,s.clientWidth):(d=t.clientHeight,t.clientWidth)),!c||(e=k(t))&&(n=ut(e),i=ct(x.create(n)),o=z(e),f.add(i).add(x.create(o)),r&&a.add(o));var p=!r&&J(t)!==t.clientWidth,v=!r&&tt(t)!==t.clientHeight,g={right:p?L():0,bottom:v?L():0};return new lt(m,d,f,a,u,g)}function ft(t){var e=t.x,n=t.y,i=dh.getElementFromPoint||dh.elementFromPoint,o=null;try{o=i.call(dh,e,n)}catch(t){return null}for(null===o&&(o=i.call(dh,e-1,n-1));o&&o.shadowRoot&&o.shadowRoot.elementFromPoint;){var r=o.shadowRoot.elementFromPoint(e,n);if(!r||o===r)break;o=r}return o}function dt(t,e,n){var i=ht(t),o=Math.max(t.scrollWidth,i.width),r=Math.max(t.scrollHeight,i.height),s=i.scrollbar.right+i.border.left+i.border.right+o,l=i.scrollbar.bottom+i.border.top+i.border.bottom+r;return(void 0===e||0<=e&&e<=s)&&(void 0===n||0<=n&&n<=l)}function mt(t){var e=ut(t),n=e.left,i=e.top,o=ct({x:n,y:i});return o.x=Math.round(o.x),o.y=Math.round(o.y),o}function pt(n,e){return m.Promise.resolve(n===dh.documentElement).then(function(t){if(t)return new x(0,0);var e=m.utils.browser.isFirefox?Math.ceil:Math.round;return m.Promise.resolve(ut(n,e)).then(function(t){return x.create(t)})}).then(function(t){return t.add(e)})}var vt=/auto|scroll|hidden/i,gt="visible";function Et(t){var e,n=rt(t,"overflowX"),i=rt(t,"overflowY"),o=vt.test(n),r=vt.test(i),s=D(t).documentElement,l=t.scrollHeight;return(m.utils.browser.isChrome||m.utils.browser.isFirefox||m.utils.browser.isSafari)&&(e=t.getBoundingClientRect().top,l=l-s.getBoundingClientRect().top+e),(o||r)&&l>s.scrollHeight}function yt(t){if(N(t))return Et(t);if(F(t))return function(t){var e=rt(t,"overflowX"),n=rt(t,"overflowY");if("hidden"===e&&"hidden"===n)return!1;var i=t.scrollHeight>t.clientHeight,o=t.scrollWidth>t.clientWidth;if(i||o)return!0;var r=t.getElementsByTagName("body")[0];if(!r)return!1;if(Et(r))return!1;var s=Math.min(t.clientWidth,r.clientWidth),l=Math.min(t.clientHeight,r.clientHeight);return r.scrollHeight>l||r.scrollWidth>s}(t);var e,n,i,o,r,s=(n=rt(e=t,"overflowX"),i=rt(e,"overflowY"),o=vt.test(n),r=vt.test(i),m.utils.browser.isIE&&(o=o||r&&n===gt,r=r||o&&i===gt),new x(o,r));if(!s.x&&!s.y)return!1;var l=s.y&&t.scrollHeight>t.clientHeight;return s.x&&t.scrollWidth>t.clientWidth||l}function bt(t){if(!t)return null;var e,n,i=(e=fh.screenLeft||fh.screenX,n=fh.screenTop||fh.screenY,new x(e,n)),o=i.x,r=i.y,s=o+t.x,l=r+t.y;return new x(s,l)}function St(t){var e=t/2;return e<1?0:Math.round(e)}function _t(t){var e=at(t);return{offsetX:St(e.width),offsetY:St(e.height)}}function wt(t,e,n){var i=_t(t);if(e="number"==typeof e?Math.round(e):i.offsetX,n="number"==typeof n?Math.round(n):i.offsetY,0<e&&0<n)return{offsetX:e,offsetY:n};var o=ht(t),r=Math.round(Math.max(t.scrollWidth,o.width)),s=Math.round(Math.max(t.scrollHeight,o.height)),l=o.scrollbar.right+o.border.left+o.border.right+r,a=o.scrollbar.bottom+o.border.top+o.border.bottom+s;return{offsetX:e<0?l+e:e,offsetY:n<0?a+n:n}}var Pt=y.positionUtils;function xt(e,n){return void 0===n&&(n=!1),i.hide(n).then(function(){var t=Pt.getElementFromPoint(e);return i.show(n).then(function(){return t})})}function Ct(t,n){return m.Promise.resolve(ft(t)).then(function(e){return m.Promise.resolve(V(n,e)).then(function(t){return t&&X(e)}).then(function(t){return t||e&&e===n?e:null})})}function At(n,i){if(!i||!n||n===i)return n;if("tref"===Y(i))return i;var e,o,t="area"===Y(i)&&O(n);return m.utils.browser.isFirefox&&t?(e=n,o=i,m.Promise.resolve(R(o,"map")).then(function(t){return t&&t.name===e.useMap.substring(1)?o:e})):m.Promise.resolve(R(i,"a")).then(function(t){return!!t}).then(function(t){return!!t&&m.Promise.resolve(V(i,n)).then(function(t){return t&&X(n)}).then(function(t){return!t&&X(i)})}).then(function(t){return t?m.Promise.resolve(ht(i)).then(function(e){return Ct({x:e.right-1,y:e.top+1},i).then(function(t){return t||Ct({x:e.left+1,y:e.bottom-1},i)}).then(function(t){return t||n})}):n})}function Tt(n,i,o){return xt(n).then(function(t){var e=m.Promise.resolve(t);return!t&&m.utils.dom.isIframeWindow(i||fh)&&0<n.x&&0<n.y&&(e=e.then(function(){return xt(n,!0)})),e.then(function(t){return At(t,o)})})}var Mt={elementIsInvisibleError:"elementIsInvisibleError",foundElementIsNotTarget:"foundElementIsNotTarget"},Dt=(Object.defineProperty(Ut.prototype,"mouseActionStepDelay",{get:function(){return 1===this._speedFactor?10:400*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(Ut.prototype,"keyActionStepDelay",{get:function(){return 1===this._speedFactor?10:200*(1-this._speedFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(Ut.prototype,"cursorSpeed",{get:function(){return Math.pow(400,this._speedFactor)/4},enumerable:!1,configurable:!0}),Object.defineProperty(Ut.prototype,"draggingSpeed",{get:function(){return Math.pow(16,this._speedFactor)/4},enumerable:!1,configurable:!0}),Ut);function Ut(t){this._speedFactor=t||1}var It=p.Promise,kt=p.nativeMethods;function Bt(e){return new It(function(t){return kt.setTimeout.call(fh,t,e)})}function Ot(){return Bt(0)}var Nt=(Ft.prototype._getAssignableProperties=function(){throw new Error("Not implemented")},Ft.prototype._assignFrom=function(t,e,n){if(void 0===n&&(n={}),t)for(var i=this._getAssignableProperties(),o=0;o<i.length;o++){for(var r,s=i[o],l=s.name,a=s.type,u=s.required,c=s.init,h=s.defaultValue,f=l.split("."),d=f.length-1,m=f[d],p=t,v=this,g=0;g<d&&p&&v;g++)p=p[f[g]],v=v[f[g]];v&&"defaultValue"in i[o]&&(v[l]=h),p&&v&&(void 0===(r=p[m])&&!u||(e&&a&&a(l,r),v[m]=c?c(l,r,n,e):r))}},Ft);function Ft(){}function Lt(i){return function(t,e){var n=typeof e;if("number"!=n)throw new i(t,n);if(isNaN(e)||!isFinite(e)||e!==Math.floor(e))throw new i(t,e)}}function Yt(t,e){this.code=t,this.isTestCafeError=!0,this.callsite=e||null}var Rt,Kt,Wt,Vt="E1",Xt="E4",Ht="E5",qt="E9",Gt="E10",zt="E11",jt="E12",$t="E24",Qt="E26",Zt="E27",Jt="E28",te="E29",ee="E30",ne="E31",ie="E32",oe="E33",re="E34",se="E35",le="E36",ae="E37",ue="E39",ce="E40",he="E41",fe="E42",de="E43",me="E44",pe="E45",ve="E46",ge="E49",Ee="E50",ye="E51",be="E52",Se="E57",_e="E64",we="E65",Pe="E68",xe="E69",Ce="E70",Ae="E71",Te="E72",Me="E73",De="E74",Ue="E76",Ie="E77",ke="E78",Be="E82",Oe="E83",Ne="E90",Fe="E91",Le="E92",Ye="E93",Re="E94",Ke="E95",We="E97",Ve="E99",Xe=(_(He,Rt=Yt),He);function He(t,e,n){var i=Rt.call(this,t)||this;return i.optionName=e,i.actualValue=n,i}function qe(t,e){var n=Kt.call(this,ge,e)||this;return n.instantiationCallsiteName=t,n}function Ge(t,e){var n=Wt.call(this,Ee,e)||this;return n.instantiationCallsiteName=t,n}_(qe,Kt=Yt),_(Ge,Wt=Yt);var ze,je,$e,Qe,Ze,Je,tn,en,nn=(_(on,ze=Yt),on);function on(t,e,n){var i=e.apiFnChain,o=e.apiFnIndex,r=ze.call(this,t,n)||this;return r.apiFnChain=i,r.apiFnIndex=o,r}function rn(t){return je.call(this,ye,t)||this}function sn(t,e){return $e.call(this,be,e,t)||this}function ln(t,e){var n=Qe.call(this,Vt)||this;return n.errStack=t,n.pageDestUrl=e,n}function an(t,e,n){var i=Ze.call(this,Xt,n)||this;return i.errMsg=String(e),i.instantiationCallsiteName=t,i}function un(t,e,n,i){var o=Je.call(this,Ht,i)||this;return o.errMsg=String(e),o.property=n,o.instantiationCallsiteName=t,o}function cn(t){var e=tn.call(this,_e)||this;return e.errMsg=String(t),e}function hn(t,e){var n=en.call(this,we)||this;return n.errMsg=String(t),n.moduleName=e,n}_(rn,je=Yt),_(sn,$e=nn),_(ln,Qe=Yt),_(an,Ze=Yt),_(un,Je=Yt),_(cn,tn=Yt),_(hn,en=Yt);var fn,dn=(_(mn,fn=Xe),mn);function mn(t,e){return fn.call(this,qt,t,e)||this}var pn,vn=(_(gn,pn=Xe),gn);function gn(t,e){return pn.call(this,Gt,t,e)||this}var En,yn=(_(bn,En=Xe),bn);function bn(t,e){return En.call(this,zt,t,e)||this}var Sn,_n=(_(wn,Sn=Xe),wn);function wn(t,e){return Sn.call(this,jt,t,e)||this}var Pn,xn=(_(Cn,Pn=Xe),Cn);function Cn(t,e){return Pn.call(this,Ne,t,e)||this}var An,Tn=(_(Mn,An=Xe),Mn);function Mn(t,e){return An.call(this,We,t,e)||this}var Dn,Un=(_(In,Dn=Xe),In);function In(t,e){return Dn.call(this,Fe,t,e)||this}var kn,Bn=(_(On,kn=Xe),On);function On(t,e){return kn.call(this,Le,t,e)||this}var Nn,Fn=(_(Ln,Nn=Xe),Ln);function Ln(t,e){return Nn.call(this,Ye,t,e)||this}var Yn,Rn=(_(Kn,Yn=Xe),Kn);function Kn(t,e){return Yn.call(this,Re,t,e)||this}var Wn,Vn=(_(Xn,Wn=Xe),Xn);function Xn(t,e){return Wn.call(this,Ke,t,e)||this}var Hn,qn,Gn,zn,jn,$n,Qn,Zn,Jn,ti,ei,ni,ii,oi,ri,si,li,ai,ui,ci,hi,fi,di,mi,pi,vi,gi,Ei,yi,bi,Si,_i,wi,Pi,xi,Ci=(_(Ai,Hn=Xe),Ai);function Ai(t,e){return Hn.call(this,Ve,t,e)||this}function Ti(t,e){return qn.call(this,$t,e,t)||this}function Mi(t){return Gn.call(this,Qt,t)||this}function Di(t){var e=zn.call(this,Zt)||this;return e.nodeDescription=t,e}function Ui(t,e){var n=jn.call(this,Jt,e)||this;return n.argumentName=t,n}function Ii(t){var e=$n.call(this,te)||this;return e.argumentName=t,e}function ki(t,e){var n=Qn.call(this,ee)||this;return n.argumentName=t,n.nodeDescription=e,n}function Bi(){return Zn.call(this,ne)||this}function Oi(){return Jn.call(this,ie)||this}function Ni(t){var e=ti.call(this,oe)||this;return e.argumentName=t,e}function Fi(){return ei.call(this,se)||this}function Li(t){var e=ni.call(this,le)||this;return e.argumentName=t,e}function Yi(t,e){var n=ii.call(this,ae)||this;return n.filePaths=t,n.scannedFilePaths=e,n}function Ri(){return oi.call(this,re)||this}function Ki(t,e){var n=ri.call(this,he)||this;return n.properties=t?"scrollTargetY property":e?"scrollTargetX property":"scrollTargetX and scrollTargetY properties",n}function Wi(t,e){var n=si.call(this,Se)||this;return t<=0?e<=0?(n.verb="are",n.dimensions="width and height"):(n.verb="is",n.dimensions="width"):(n.verb="is",n.dimensions="height"),n}function Vi(t){return li.call(this,ce,t)||this}function Xi(){return ai.call(this,ue)||this}function Hi(){return ui.call(this,fe)||this}function qi(){return ci.call(this,xe)||this}function Gi(){return hi.call(this,Pe)||this}function zi(){return fi.call(this,Ce)||this}function ji(){return di.call(this,Ae)||this}function $i(){return mi.call(this,Me)||this}function Qi(){return pi.call(this,Be)||this}function Zi(t){var e=vi.call(this,ke)||this;return e.errMsg=t,e}function Ji(){return gi.call(this,De)||this}function to(){return Ei.call(this,Ue)||this}function eo(){return yi.call(this,Ie)||this}function no(){return bi.call(this,Te)||this}function io(){return Si.call(this,Oe)||this}function oo(){return _i.call(this,de)||this}function ro(){return wi.call(this,me)||this}function so(t,e){var n=Pi.call(this,pe)||this;return n.dialogType=t,n.pageUrl=e,n}function lo(t,e,n){var i=xi.call(this,ve)||this;return i.dialogType=t,i.errMsg=e,i.pageUrl=n,i}_(Ti,qn=nn),_(Mi,Gn=Yt),_(Di,zn=Yt),_(Ui,jn=nn),_(Ii,$n=Yt),_(ki,Qn=Yt),_(Bi,Zn=Yt),_(Oi,Jn=Yt),_(Ni,ti=Yt),_(Fi,ei=Yt),_(Li,ni=Yt),_(Yi,ii=Yt),_(Ri,oi=Yt),_(Ki,ri=Yt),_(Wi,si=Yt),_(Vi,li=Yt),_(Xi,ai=Yt),_(Hi,ui=Yt),_(qi,ci=Yt),_(Gi,hi=Yt),_(zi,fi=Yt),_(ji,di=Yt),_($i,mi=Yt),_(Qi,pi=Yt),_(Zi,vi=Yt),_(Ji,gi=Yt),_(to,Ei=Yt),_(eo,yi=Yt),_(no,bi=Yt),_(io,Si=Yt),_(oo,_i=Yt),_(ro,wi=Yt),_(so,Pi=Yt),_(lo,xi=Yt);var ao,uo,co,ho,fo,mo,po,vo,go,Eo,yo,bo,So,_o=Lt(dn),wo=(uo=Lt(ao=vn),function(t,e){if(uo(t,e),e<0)throw new ao(t,e)}),Po=(co=yn,function(t,e){var n=typeof e;if("boolean"!=n)throw new co(t,n)}),xo=(ho=_n,function(t,e){var n=typeof e;if("number"!=n)throw new ho(t,n);if(isNaN(e)||e<.01||1<e)throw new ho(t,e)}),Co=(fo=xn,function(t,e){var n=typeof e;if("string"!=n)throw new fo(t,n)}),Ao=(mo=Tn,function(t,e){var n=typeof e;if("string"!=n&&!(e instanceof RegExp))throw new mo(t,n)}),To=(po=Un,function(t,e){if(!(e instanceof Date))throw new po(t,e)}),Mo=(vo=Bn,function(t,e){if(isNaN(Number(e)))throw new vo(t,typeof e)}),Do=(go=Fn,function(t,e){var n=typeof e;if("string"!=n&&!(e instanceof URL))throw new go(t,n)}),Uo=(Eo=Rn,function(t,e){var n=typeof e;if("object"!=n&&!(e instanceof URLSearchParams))throw new Eo(t,n)}),Io=(yo=Vn,function(t,e){var n=typeof e;if("object"!=n)throw new yo(t,n)}),ko=(bo=Ci,function(t,e){var n=typeof e;if("function"!=n)throw new bo(t,n)}),Bo=(_(Oo,So=Nt),Oo.prototype._getAssignableProperties=function(){return[{name:"speed",type:xo}]},Oo);function Oo(t,e){var n=So.call(this)||this;return n.speed=null,n._assignFrom(t,e),n}var No,Fo=(_(Lo,No=Bo),Lo.prototype._getAssignableProperties=function(){return No.prototype._getAssignableProperties.call(this).concat([{name:"offsetX",type:_o},{name:"offsetY",type:_o}])},Lo);function Lo(t,e){var n=No.call(this)||this;return n.offsetX=null,n.offsetY=null,n._assignFrom(t,e),n}var Yo,Ro,Ko=(_(Wo,Yo=Fo),Wo.prototype._getAssignableProperties=function(){return Yo.prototype._getAssignableProperties.call(this).concat([{name:"scrollToCenter",type:Po},{name:"skipParentFrames",type:Po}])},Wo);function Wo(t,e){var n=Yo.call(this)||this;return n.scrollToCenter=!1,n.skipParentFrames=!1,n._assignFrom(t,e),n}function Vo(t,e){var n=Ro.call(this)||this;return n.scrollTargetX=null,n.scrollTargetY=null,n.includeMargins=!1,n.includeBorders=!0,n.includePaddings=!0,n.crop={left:null,right:null,top:null,bottom:null},n._assignFrom(t,e),n}_(Vo,Ro=Bo),Vo.prototype._getAssignableProperties=function(){return Ro.prototype._getAssignableProperties.call(this).concat([{name:"scrollTargetX",type:_o},{name:"scrollTargetY",type:_o},{name:"crop.left",type:_o},{name:"crop.right",type:_o},{name:"crop.top",type:_o},{name:"crop.bottom",type:_o},{name:"includeMargins",type:Po},{name:"includeBorders",type:Po},{name:"includePaddings",type:Po}])};var Xo,Ho=(_(qo,Xo=Fo),qo.prototype._getAssignableProperties=function(){return Xo.prototype._getAssignableProperties.call(this).concat([{name:"modifiers.ctrl",type:Po},{name:"modifiers.alt",type:Po},{name:"modifiers.shift",type:Po},{name:"modifiers.meta",type:Po}])},qo);function qo(t,e){var n=Xo.call(this)||this;return n.modifiers={ctrl:!1,alt:!1,shift:!1,meta:!1},n._assignFrom(t,e),n}var Go,zo=(_(jo,Go=Ho),jo.prototype._getAssignableProperties=function(){return Go.prototype._getAssignableProperties.call(this).concat([{name:"caretPos",type:wo}])},jo);function jo(t,e){var n=Go.call(this)||this;return n.caretPos=null,n._assignFrom(t,e),n}var $o,Qo=(_(Zo,$o=Ho),Zo.prototype._getAssignableProperties=function(){return $o.prototype._getAssignableProperties.call(this).concat([{name:"speed"},{name:"minMovingTime"},{name:"holdLeftButton"},{name:"skipScrolling",type:Po},{name:"skipDefaultDragBehavior",type:Po}])},Zo);function Zo(t,e){var n=$o.call(this)||this;return n.speed=null,n.minMovingTime=null,n.holdLeftButton=!1,n.skipScrolling=!1,n.skipDefaultDragBehavior=!1,n._assignFrom(t,e),n}var Jo,tr,er,nr,ir,or,rr=(_(sr,Jo=zo),sr.prototype._getAssignableProperties=function(){return Jo.prototype._getAssignableProperties.call(this).concat([{name:"replace",type:Po},{name:"paste",type:Po},{name:"confidential",type:Po}])},sr);function sr(t,e){var n=Jo.call(this)||this;return n.replace=!1,n.paste=!1,n.confidential=void 0,n._assignFrom(t,e),n}function lr(t,e){var n=tr.call(this,t,e)||this;return n.destinationOffsetX=null,n.destinationOffsetY=null,n._assignFrom(t,e),n}function ar(t,e){var n=er.call(this)||this;return n.portraitOrientation=!1,n._assignFrom(t,e),n}function ur(t,e){var n=nr.call(this)||this;return n.timeout=void 0,n.allowUnawaitedPromise=!1,n._assignFrom(t,e),n}function cr(t,e){var n=ir.call(this)||this;return n.confidential=void 0,n._assignFrom(t,e),n}function hr(t,e){var n=or.call(this)||this;return n._assignFrom(t,e),n}_(lr,tr=Ho),lr.prototype._getAssignableProperties=function(){return tr.prototype._getAssignableProperties.call(this).concat([{name:"destinationOffsetX",type:_o},{name:"destinationOffsetY",type:_o}])},_(ar,er=Nt),ar.prototype._getAssignableProperties=function(){return[{name:"portraitOrientation",type:Po}]},_(ur,nr=Nt),ur.prototype._getAssignableProperties=function(){return[{name:"timeout",type:wo},{name:"allowUnawaitedPromise",type:Po}]},_(cr,ir=Bo),cr.prototype._getAssignableProperties=function(){return ir.prototype._getAssignableProperties.call(this).concat([{name:"confidential",type:Po}])},_(hr,or=Nt),hr.prototype._getAssignableProperties=function(){return[{name:"name",type:Co},{name:"value",type:Co},{name:"domain",type:Co},{name:"path",type:Co},{name:"expires",type:To},{name:"maxAge",type:Mo},{name:"secure",type:Po},{name:"httpOnly",type:Po},{name:"sameSite",type:Co}]};var fr,dr=(_(mr,fr=Nt),mr.prototype._getAssignableProperties=function(){return[{name:"username",type:Co,required:!0},{name:"password",type:Co}]},mr);function mr(t,e){var n=fr.call(this)||this;return n._assignFrom(t,e),n}var pr,vr,gr,Er,yr,br=(_(Sr,pr=Nt),Sr.prototype._getAssignableProperties=function(){return[{name:"protocol",type:Co},{name:"host",type:Co,required:!0},{name:"port",type:Mo,required:!0},{name:"auth",type:Io,init:Cr}]},Sr);function Sr(t,e){var n=pr.call(this)||this;return n._assignFrom(t,e),n}function _r(t,e){var n=vr.call(this)||this;return n._assignFrom(t,e),n}function wr(t,e){var n=gr.call(this)||this;return n._assignFrom(t,e),n}function Pr(t,e){var n=Er.call(this)||this;return n._assignFrom(t,e),n}function xr(t,e){var n=yr.call(this)||this;return n._assignFrom(t,e),n}function Cr(t,e,n,i){return void 0===i&&(i=!0),new dr(e,i)}function Ar(t,e,n,i){return void 0===i&&(i=!0),new br(e,i)}_(_r,vr=Nt),_r.prototype._getAssignableProperties=function(){return[{name:"url",type:Do},{name:"method",type:Co},{name:"headers",type:Io},{name:"params",type:Uo},{name:"body"},{name:"timeout",type:Mo},{name:"withCredentials",type:Po},{name:"auth",type:Io,init:Cr},{name:"proxy",type:Io,init:Ar},{name:"rawResponse",type:Po}]},_(wr,gr=Nt),wr.prototype._getAssignableProperties=function(){return[{name:"credentials",type:Mo}]},_(Pr,Er=Nt),Pr.prototype._getAssignableProperties=function(){return[{name:"stack",type:Ao,required:!1},{name:"message",type:Ao,required:!1},{name:"pageUrl",type:Ao,required:!1}]},_(xr,yr=Nt),xr.prototype._getAssignableProperties=function(){return[{name:"fn",type:ko,required:!0},{name:"dependencies",type:Io,required:!1}]};var Tr=null,Mr=function(){return Tr},Dr=function(t){Tr=t},Ur=(p.Promise,p.nativeMethods,p.eventSandbox.listeners,p.utils.browser,p.utils.event.BUTTON,p.utils.event.BUTTONS_PARAMETER);function Ir(t){return t.top!==t}p.utils.event.DOM_EVENTS,p.utils.event.WHICH_PARAMETER,p.utils.event.preventDefault;var kr=p.Promise,Br=p.eventSandbox.message;function Or(t,i,e){return new kr(function(n){Br.on(Br.SERVICE_MSG_RECEIVED_EVENT,function t(e){e.message.cmd===i&&(Br.off(Br.SERVICE_MSG_RECEIVED_EVENT,t),n(e.message))}),Br.sendServiceMsg(t,e)})}var Nr=(Fr.prototype.on=function(t,e){this._eventsListeners[t]||(this._eventsListeners[t]=[]),this._eventsListeners[t].push(e)},Fr.prototype.once=function(n,i){var o=this;this.on(n,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.off(n,i),i.apply(void 0,t)})},Fr.prototype.off=function(t,e){var n=this._eventsListeners[t];n&&(this._eventsListeners[t]=m.nativeMethods.arrayFilter.call(n,function(t){return t!==e}))},Fr.prototype.offAll=function(t){t?this._eventsListeners[t]=[]:this._eventsListeners={}},Fr.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=this._eventsListeners[e];if(i)for(var o=0;o<i.length;o++)try{i[o].apply(this,t)}catch(t){if(!(t.message&&-1<t.message.indexOf("freed script")))throw t;this.off(e,i[o])}},Fr);function Fr(){this._eventsListeners={}}var Lr=Nr,Yr=m.eventSandbox.listeners;function Rr(){this.initialized=!1,this.stopPropagationFlag=!1,this.events=new Lr}var Kr=(Rr.prototype._internalListener=function(t,e,n,i,o){this.events.emit("scroll",t),this.stopPropagationFlag&&(i(),o())},Rr.prototype.init=function(){var n=this;this.initialized||(this.initialized=!0,Yr.initElementListening(fh,["scroll"]),Yr.addFirstInternalEventBeforeListener(fh,["scroll"],function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n._internalListener.apply(n,t)}))},Rr.prototype.waitForScroll=function(t){var e=this,n=null,i=new m.Promise(function(t){n=t});return i.cancel=function(){return e.events.off("scroll",n)},this.initialized?this.handleScrollEvents(t,n):n(),i},Rr.prototype.handleScrollEvents=function(n,t){var e,i=this;this.events.once("scroll",t),(e=n)&&e.getRootNode&&D(e)!==e.getRootNode()&&(Yr.initElementListening(n,["scroll"]),Yr.addFirstInternalEventBeforeListener(n,["scroll"],function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i._internalListener.apply(i,t),Yr.cancelElementListening(n)}))},Rr.prototype.stopPropagation=function(){this.stopPropagationFlag=!0},Rr.prototype.enablePropagation=function(){this.stopPropagationFlag=!1},new Rr),Wr=(Vr._isScrollValuesChanged=function(t,e){return et(t)!==e.left||nt(t)!==e.top},Vr.prototype._setScroll=function(t,e){var n=this,i=e.left,o=e.top,r=F(t)?D(t):t,s={left:et(r),top:nt(r)},i=Math.max(i,0),o=Math.max(o,0),l=Kr.waitForScroll(r);return it(r,i),ot(r,o),Vr._isScrollValuesChanged(r,s)?l=l.then(function(){n._scrollWasPerformed||(n._scrollWasPerformed=Vr._isScrollValuesChanged(r,s))}):(l.cancel(),m.Promise.resolve())},Vr.prototype._getScrollToPoint=function(t,e,n){var i=Math.floor(t.width/2),o=Math.floor(t.height/2),r=this._scrollToCenter?i:Math.min(n.left,i),s=this._scrollToCenter?o:Math.min(n.top,o),l=t.scroll,a=l.left,u=l.top,c=e.x>=a+t.width-r,h=e.x<=a+r,f=e.y>=u+t.height-s,d=e.y<=u+s;return c?a=e.x-t.width+r:h&&(a=e.x-r),f?u=e.y-t.height+s:d&&(u=e.y-s),{left:a,top:u}},Vr.prototype._getScrollToFullChildView=function(t,e,n){var i,o,r,s,l,a,u={left:null,top:null},c=t.width>=e.width,h=t.height>=e.height,f=(i=e,o=t,H.create({top:i.top-o.top,left:i.left-o.left,right:o.right-i.right,bottom:o.bottom-i.bottom}).sub(o.border).sub(o.scrollbar).round(Math.ceil,Math.floor));return c&&(r=t.width-e.width,s=Math.min(n.left,r),this._scrollToCenter&&(s=r/2),f.left<s?u.left=Math.round(t.scroll.left+f.left-s):f.right<s&&(u.left=Math.round(t.scroll.left+Math.min(f.left,-f.right)+s))),h&&(l=t.height-e.height,a=Math.min(n.top,l),this._scrollToCenter&&(a=l/2),f.top<a?u.top=Math.round(t.scroll.top+f.top-a):f.bottom<a&&(u.top=Math.round(t.scroll.top+Math.min(f.top,-f.bottom)+a))),u},Vr._getChildPoint=function(t,e,n){return x.create(e).sub(x.create(t)).add(x.create(t.scroll)).add(x.create(e.border)).add(n)},Vr.prototype._getScrollPosition=function(t,e,n,i){var o=Vr._getChildPoint(t,e,n),r=this._getScrollToPoint(t,o,i),s=this._getScrollToFullChildView(t,e,i);return{left:Math.max(null===s.left?r.left:s.left,0),top:Math.max(null===s.top?r.top:s.top,0)}},Vr._getChildPointAfterScroll=function(t,e,n,i){return x.create(e).add(x.create(t.scroll)).sub(x.create(n)).add(i)},Vr.prototype._isChildFullyVisible=function(t,e,n){var i=Vr._getChildPointAfterScroll(t,e,t.scroll,n),o=this._getScrollPosition(t,e,n,{left:0,top:0}),r=o.left,s=o.top;return!this._isTargetElementObscuredInPoint(i)&&r===t.scroll.left&&s===t.scroll.top},Vr.prototype._scrollToChild=function(t,e,n){for(var i=ht(t),o=ht(e),r=J(fh),s=tt(fh),l=i.scroll,a=!this._isChildFullyVisible(i,o,n);a;){l=this._getScrollPosition(i,o,n,this._maxScrollMargin);var u=Vr._getChildPointAfterScroll(i,o,l,n),c=this._isTargetElementObscuredInPoint(u);this._maxScrollMargin.left+=20,this._maxScrollMargin.left>=r&&(this._maxScrollMargin.left=50,this._maxScrollMargin.top+=20),a=c&&this._maxScrollMargin.top<s}return this._maxScrollMargin={left:50,top:50},this._setScroll(t,l)},Vr.prototype._scrollElement=function(){if(!yt(this._element))return m.Promise.resolve();var t=ht(this._element),e=this._getScrollToPoint(t,this._offsets,this._maxScrollMargin);return this._setScroll(this._element,e)},Vr.prototype._scrollParents=function(){var t,e,n,i,o,r,s=this,l=(t=this._element,i=K(t),!I(t)||(e=k(t))&&(n=K(e),i.concat(n)),m.nativeMethods.arrayFilter.call(i,yt)),a=this._element,u=et(a),c=nt(a),h=x.create(this._offsets).sub(new x(u,c).round()),f=function(n,i){return w(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:e=0,t.label=1;case 1:return e<n?[4,i(e)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}(l.length,function(t){return s._scrollToChild(l[t],a,h).then(function(){o=ht(a),r=ht(l[t]),h.add(x.create(o)).sub(x.create(r)).add(x.create(r.border)),a=l[t]})}),d={scrollWasPerformed:this._scrollWasPerformed,offsetX:h.x,offsetY:h.y,maxScrollMargin:this._maxScrollMargin};return f.then(function(){if(!s._skipParentFrames&&Ir(fh))return d.cmd=Vr.SCROLL_REQUEST_CMD,Or(d,Vr.SCROLL_RESPONSE_CMD,fh.parent)}).then(function(){return s._scrollWasPerformed})},Vr._getFixedAncestorOrSelf=function(t){return W(t,!0,st)},Vr.prototype._isTargetElementObscuredInPoint=function(t){var e=ft(t);if(!e)return!1;var n=Vr._getFixedAncestorOrSelf(e);return!!n&&!n.contains(this._element)},Vr.prototype.run=function(){var t=this;return this._scrollElement().then(function(){return t._scrollParents()})},Vr.SCROLL_REQUEST_CMD="automation|scroll|request",Vr.SCROLL_RESPONSE_CMD="automation|scroll|response",Vr);function Vr(t,e,n){this._element=t,this._offsets=new x(e.offsetX,e.offsetY),this._scrollToCenter=!!e.scrollToCenter,this._skipParentFrames=!!e.skipParentFrames,this._maxScrollMargin=n||{left:50,top:50},this._scrollWasPerformed=!1}var Xr=p.utils.browser,Hr=(qr.prototype.setup=function(){this.dragAndDropMode=!1,this.dropAllowed=!1},qr.prototype.leaveElement=function(){},qr.prototype.move=function(){},qr.prototype.enterElement=function(){},qr.prototype.dragAndDrop=function(){},qr.prototype.teardown=function(){},qr.prototype.run=function(t,e,n,i,o){var r=e&&g.domUtils.isElementInDocument(e),s=e&&g.domUtils.isElementInIframe(e)&&!g.domUtils.getIframeByElement(e);r&&!s||(e=null);var l=t!==e,a=l?g.domUtils.getCommonAncestor(t,e):null;this.setup(),l&&e&&this.leaveElement(t,e,a,n),Xr.isIE&&this.move(t,n),l&&g.domUtils.isElementInDocument(t)&&this.enterElement(t,e,a,n),Xr.isIE||this.move(t,n),this.dragAndDrop(i,t,e,n,o),this.teardown(t,n,e);var u=this.dragAndDropMode,c=this.dropAllowed;return this.dragAndDropMode=!1,this.dropAllowed=!1,{dragAndDropMode:u,dropAllowed:c}},qr);function qr(t){var e=t.moveEvent;this.dragAndDropMode=!1,this.dropAllowed=!1,this.moveEvent=e}var Gr=p.eventSandbox.eventSimulator,zr=p.utils.extend,jr=p.nativeMethods,$r=(Qr.leaveElement=function(t,e,n,i){Gr.mouseout(e,zr({relatedTarget:t},i));for(var o=e;o&&o!==n;)Gr.mouseleave(o,zr({relatedTarget:t},i)),o=jr.nodeParentNodeGetter.call(o)},Qr.enterElement=function(t,e,n,i){Gr.mouseover(t,zr({relatedTarget:e},i));for(var o=t,r=[];o&&o!==n;)r.push(o),o=g.domUtils.getParentExceptShadowRoot(o);for(var s=r.length-1;-1<s;s--)Gr.mouseenter(r[s],zr({relatedTarget:e},i))},Qr.move=function(t,e,n){Gr[t](e,n)},Qr);function Qr(){}var Zr=(Jr.dragAndDrop=function(t,e,n,i){return Gr.drag(t,i),e!==n&&(g.domUtils.isElementInDocument(e)&&(i.relatedTarget=n,Gr.dragenter(e,i)),n&&(i.relatedTarget=e,Gr.dragleave(n,i))),!Gr.dragover(e,i)},Jr);function Jr(){}var ts,es=p.eventSandbox.eventSimulator,ns=(_(is,ts=Hr),is.prototype.leaveElement=function(t,e,n,i){$r.leaveElement(t,e,n,i)},is.prototype.enterElement=function(t,e,n,i){$r.enterElement(t,e,n,i)},is.prototype.move=function(t,e){this._needEmulateMoveEvent()&&$r.move(this.moveEvent,t,e)},is.prototype.teardown=function(t,e,n){this._needEmulateMoveEvent()&&g.domUtils.isElementInDocument(t)&&t!==n&&es[this.moveEvent](t,e)},is.prototype._needEmulateMoveEvent=function(){return"touchmove"!==this.moveEvent||this.holdLeftButton},is);function is(t){var e=ts.call(this,t)||this;return e.holdLeftButton=t.holdLeftButton,e}var os,rs=(_(ss,os=Hr),ss.prototype.setup=function(){os.prototype.setup.call(this),this.dragAndDropMode=!0},ss.prototype.dragAndDrop=function(t,e,n,i){this.dropAllowed=Zr.dragAndDrop(t,e,n,i)},ss);function ss(){return null!==os&&os.apply(this,arguments)||this}var ls,as=p.eventSandbox.eventSimulator,us=(_(cs,ls=Hr),cs.prototype.setup=function(){ls.prototype.setup.call(this),this.dragAndDropMode=!0},cs.prototype.leaveElement=function(t,e,n,i){$r.leaveElement(t,e,n,i)},cs.prototype.move=function(t,e){$r.move(this.moveEvent,t,e)},cs.prototype.enterElement=function(t,e,n,i){$r.enterElement(t,e,n,i)},cs.prototype.dragAndDrop=function(t,e,n,i,o){var r=as.dragstart(t,i);o.setReadOnlyMode(),r?this.dropAllowed=Zr.dragAndDrop(t,e,n,i):this.dragAndDropMode=!1},cs.prototype.run=function(t,e,n,i,o){return ls.prototype.run.call(this,t,null,n,i,o)},cs);function cs(){return null!==ls&&ls.apply(this,arguments)||this}function hs(t,e,n){return new(t?e?rs:us:ns)(n)}var fs=(ds.create=function(o,r,s,l){return w(this,void 0,m.Promise,function(){var e,n,i;return P(this,function(t){switch(t.label){case 0:return[4,ds.getTarget(o,s,new x(r.offsetX,r.offsetY))];case 1:return e=t.sent(),n=e.element,i=e.offset,[2,new ds(n,i,r,s,l)]}})})},ds.getTarget=function(e,n,i){return m.Promise.resolve(dt(e,i.x,i.y)).then(function(t){return t?{element:e,offset:i}:m.Promise.all([pt(e,i),n.document.documentElement]).then(function(t){var e=t[0];return{element:t[1],offset:e}})})},ds.prototype._getCursorSpeed=function(){return this.automationSettings.cursorSpeed},ds.prototype._getTargetClientPoint=function(){var o=this;return m.Promise.resolve($(this.element)).then(function(i){return F(o.element)?x.create(o.offset).sub(x.create(i)).round(Math.round):m.Promise.resolve(mt(o.element)).then(function(t){var e=N(o.element),n=x.create(t).add(o.offset);return e||n.sub(x.create(i)),n.round(Math.floor)})})},ds.prototype._getEventSequenceOptions=function(t){var e=Ur.noButton,n=bt(t);return{eventOptions:{clientX:t.x,clientY:t.y,screenX:null==n?void 0:n.x,screenY:null==n?void 0:n.y,buttons:e,ctrl:this.modifiers.ctrl,alt:this.modifiers.alt,shift:this.modifiers.shift,meta:this.modifiers.meta},eventSequenceOptions:{moveEvent:this.moveEvent}}},ds.prototype._runEventSequence=function(t,e){var n=e.eventOptions,i=e.eventSequenceOptions;return hs(!1,this.firstMovingStepOccured,i).run(t,Mr(),n,null,null)},ds.prototype._emulateEvents=function(t,e){var n=this._getEventSequenceOptions(e);this._runEventSequence(t,n),this.firstMovingStepOccured=!0,Dr(t)},ds.prototype._movingStep=function(n){var i=this;return this.cursor.move(n).then(function(){return xt(i.cursor.getPosition())}).then(function(t){var e=i._getCorrectedTopElement(t);return e?i._emulateEvents(e,n):null}).then(Ot)},ds.prototype._getCorrectedTopElement=function(t){return t},ds.prototype._move=function(e){var n=this,i=this.cursor.getPosition(),o=x.create(e).sub(i),r=m.nativeMethods.dateNow(),s=Math.max(Math.max(Math.abs(o.x),Math.abs(o.y))/this.cursorSpeed,this.minMovingTime),l=x.create(i),a=!0;return function(e,n){return w(this,void 0,void 0,function(){return P(this,function(t){switch(t.label){case 0:return e()?[4,n()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}})})}(function(){return!l.eql(e)},function(){var t;return n._needMoveCursorImmediately()?l=x.create(e):a?(a=!1,l.add({x:0<o.x?1:-1,y:0<o.y?1:-1})):(t=Math.min((m.nativeMethods.dateNow()-r)/s,1),l=x.create(o).mul(t).add(i).round(Math.floor)),n._movingStep(l)})},ds.prototype._needMoveCursorImmediately=function(){return this.touchMode},ds.prototype._scroll=function(){if(this.skipScrolling)return m.Promise.resolve(!1);var t=new Ko({offsetX:this.offset.x,offsetY:this.offset.y},!1);return new Wr(this.element,t).run()},ds.prototype._moveToCurrentFrame=function(t){var e=this;if(this.cursor.isActive(this.window))return m.Promise.resolve();var n=this.cursor.getPosition(),i=n.x,o=n.y,r=this.cursor.getActiveWindow(this.window),c=null,s=null,h={cmd:"automation|move|request",startX:i,startY:o,endX:t.x,endY:t.y,modifiers:this.modifiers,speed:this.speed};return m.Promise.resolve().then(function(){if(r.parent===e.window)return m.Promise.resolve(function(t){var e=[];U(dh,"*",function(t){"IFRAME"===t.tagName&&e.push(t),t.shadowRoot&&U(t.shadowRoot,"iframe",function(t){return e.push(t)})});for(var n=0;n<e.length;n++)if(M.contentWindowGetter.call(e[n])===t)return e[n];return null}(r)).then(function(t){return c=t,m.Promise.resolve((n=ut(e=t),i=n.left,o=n.top,r=ct({x:i,y:o}),s=z(e),l=j(e),a=r.x+s.left+l.left,u=r.y+s.top+l.top,new H(u,a+Q(e),u+Z(e),a))).then(function(t){h.left=t.left,h.top=t.top,h.right=t.right,h.bottom=t.bottom});var e,n,i,o,r,s,l,a,u})}).then(function(){return xt(e.cursor.getPosition())}).then(function(t){return s=t===c,r.parent===e.window&&(h.iframeUnderCursor=s),Or(h,"automation|move|response",r)}).then(function(t){if(e.cursor.setActiveWindow(e.window),s||m.utils.dom.isIframeWindow(e.window))return e.cursor.move(t)})},ds.prototype.run=function(){var n=this;return this._scroll().then(function(){return m.Promise.all([n._getTargetClientPoint(),(t=n.window,new H(0,Q(t),Z(t),0))]);var t}).then(function(t){var e=t[0];if(t[1].contains(e))return n._moveToCurrentFrame(e).then(function(){return n._move(e)})})},ds);function ds(t,e,n,i,o){this.touchMode=m.utils.featureDetection.isTouchDevice,this.moveEvent=this.touchMode?"touchmove":"mousemove",this.automationSettings=new Dt(n.speed),this.cursorSpeed=this._getCursorSpeed(),this.element=t,this.window=i,this.offset=e,this.cursor=o,this.minMovingTime=n.minMovingTime||0,this.modifiers=n.modifiers||{},this.skipScrolling=n.skipScrolling,this.skipDefaultDragBehavior=n.skipDefaultDragBehavior,this.speed=n.speed,this.firstMovingStepOccured=!1}var ms=(ps.prototype._ensureActiveWindow=function(t){this._activeWindow!==t&&this._activeWindow!==t.parent&&this._activeWindow.parent!==t&&(this._activeWindow=t)},ps.prototype.isActive=function(t){return this._ensureActiveWindow(t),this._activeWindow===t},ps.prototype.setActiveWindow=function(t){this._activeWindow=t},ps.prototype.getActiveWindow=function(t){return this._ensureActiveWindow(t),this._activeWindow},ps.prototype.getPosition=function(){return new x(this._x,this._y)},ps.prototype.move=function(t){return this._x=t.x,this._y=t.y,this._ui.move(t)},ps.prototype.hide=function(){return this._ui.hide?this._ui.hide():m.Promise.resolve()},ps.prototype.show=function(){return this._ui.show?this._ui.show():m.Promise.resolve()},ps.prototype.leftButtonDown=function(){return this._ui.leftButtonDown()},ps.prototype.rightButtonDown=function(){return this._ui.rightButtonDown()},ps.prototype.buttonUp=function(){return this._ui.buttonUp()},ps);function ps(t,e){this._ui=e,this._x=-1,this._y=-1,this._activeWindow=t}var vs=Ir(fh)?i.iframeCursorUI:i.cursorUI,gs=new ms(fh.top,vs),Es=y.positionUtils,ys=y.domUtils,bs=y.eventUtils,Ss=(_s.create=function(t){var n=t.element,i=t.clientPoint,o=t.screenPoint,r=t.isTarget,s=t.inMoving;return w(this,void 0,void 0,function(){var e;return P(this,function(t){switch(t.label){case 0:return e=null,i?[4,bt(i)]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return[2,new _s({element:n,clientPoint:i,screenPoint:o,isTarget:r,inMoving:s,devicePoint:e})]}})})},_s);function _s(t){var e=t.element,n=void 0===e?null:e,i=t.clientPoint,o=void 0===i?null:i,r=t.screenPoint,s=void 0===r?null:r,l=t.isTarget,a=void 0!==l&&l,u=t.inMoving,c=void 0!==u&&u,h=t.devicePoint,f=void 0===h?null:h;this.element=n,this.clientPoint=o,this.screenPoint=s,this.devicePoint=f,this.isTarget=a,this.inMoving=c}var ws,Ps=(_(xs,ws=Nr),xs.prototype._ensureWindowAndCursorForLegacyTests=function(t){t.window=t.window||fh,t.cursor=gs},xs.prototype._getElementForEvent=function(n){return w(this,void 0,void 0,function(){var e;return P(this,function(t){return e=dt(this.element,this.options.offsetX,this.options.offsetY)?this.element:null,[2,Tt(n.point,this.window,e)]})})},xs.prototype._moveToElement=function(){return w(this,void 0,void 0,function(){var e,n=this;return P(this,function(t){switch(t.label){case 0:return e=new Qo(m.utils.extend({skipScrolling:!0},this.options),!1),[4,fs.create(this.element,e,this.window,this.cursor)];case 1:return[2,t.sent().run().then(function(){return Bt(n.automationSettings.mouseActionStepDelay)})]}})})},xs.prototype._scrollToElement=function(){var e=this,n=!1,t=new Ko(this.options,!1);return new Wr(this.element,t).run().then(function(t){return n=!!t,Bt(e.automationSettings.mouseActionStepDelay)}).then(function(){return Tt(e.cursor.getPosition(),e.window)}).then(function(t){return function(s,l,a){return w(this,void 0,p.Promise,function(){var e,n,i,o,r;return P(this,function(t){switch(t.label){case 0:return s&&ys.contains(l,s)&&a?(e=Mr(),n=ys.getCommonAncestor(s,e),[4,Es.getClientPosition(s)]):[2];case 1:return[4,bt(i=t.sent())];case 2:return(o=t.sent())&&(r={clientX:i.x,clientY:i.y,screenX:o.x,screenY:o.y,ctrl:!1,alt:!1,shift:!1,meta:!1,buttons:bs.BUTTONS_PARAMETER.leftButton},$r.leaveElement(s,e,n,r),$r.enterElement(s,e,n,r),Dr(s)),[2]}})})}(t,e.element,n)}).then(function(){return n})},xs.prototype._getElementOffset=function(){var t=wt(this.element),e=this.options,n=e.offsetX,i=e.offsetY;return{offsetX:n=n||0===n?n:t.offsetX,offsetY:i=i||0===i?i:t.offsetY}},xs.prototype._wrapAction=function(p){return w(this,void 0,void 0,function(){var e,n,i,o,r,s,l,a,u,c,h,f,d,m;return P(this,function(t){switch(t.label){case 0:return e=this._getElementOffset(),n=e.offsetX,i=e.offsetY,[4,pt(this.element,{x:n,y:i})];case 1:return o=t.sent(),[4,mt(this.element)];case 2:return r=t.sent(),[4,p()];case 3:return t.sent(),[4,pt(this.element,{x:n,y:i})];case 4:return s=t.sent(),[4,mt(this.element)];case 5:return l=t.sent(),[4,function(i,o){return w(this,void 0,void 0,function(){var e,n;return P(this,function(t){switch(t.label){case 0:return[4,$(i)];case 1:return e=t.sent(),n=yt(i),!/html/i.test(i.tagName)&&n&&(o.x-=e.left,o.y-=e.top),[2,ct(o)]}})})}(this.element,s)];case 6:return a=t.sent(),[4,dt(this.element,n,i)];case 7:return u=t.sent()?this.element:null,[4,Tt(a,this.window,u)];case 8:return(c=t.sent())?(h=!u||c===u||c===this.element)?[3,10]:[4,this._contains(this.element,c)]:[2,Ss.create({element:null,clientPoint:null,screenPoint:null,isTarget:!1,inMoving:!1})];case 9:h=t.sent(),t.label=10;case 10:return f=o.x!==s.x||o.y!==s.y,d=r.x!==l.x||r.y!==l.y,m=f&&d,[2,Ss.create({element:c,clientPoint:a,screenPoint:s,isTarget:h,inMoving:m})]}})})},xs._checkElementState=function(t,e){if(!t.element)throw new Error(Mt.elementIsInvisibleError);if(e&&(!t.isTarget||t.inMoving))throw new Error(Mt.foundElementIsNotTarget);return t},xs.prototype._ensureElement=function(e,n,i){var o=this;return void 0===n&&(n=!1),void 0===i&&(i=!1),this._wrapAction(function(){return o._scrollToElement()}).then(function(t){return xs._checkElementState(t,e)}).then(function(t){return i?t:o._wrapAction(function(){return o._moveToElement()})}).then(function(t){return n||xs._checkElementState(t,e),t}).then(function(t){return o.emit(o.TARGET_ELEMENT_FOUND_EVENT,{element:(null==t?void 0:t.element)||null}),{element:(null==t?void 0:t.element)||null,clientPoint:(null==t?void 0:t.clientPoint)||null,screenPoint:(null==t?void 0:t.screenPoint)||null,devicePoint:(null==t?void 0:t.devicePoint)||null}})},xs.prototype._contains=function(o,r){return w(this,void 0,void 0,function(){var e,n,i;return P(this,function(t){switch(t.label){case 0:return[4,K(r)];case 1:for(e=t.sent(),n=0,i=e;n<i.length;n++)if(i[n]===o)return[2,!0];return[2,!1]}})})},xs);function xs(t,e,n,i){var o=ws.call(this)||this;return o.TARGET_ELEMENT_FOUND_EVENT="automation|target-element-found-event",o.element=t,o.options=e,o.automationSettings=new Dt(e.speed||1),o.window=n,o.cursor=i,o._ensureWindowAndCursorForLegacyTests(o),o}var Cs,As=p.Promise,Ts=(_(Ms,Cs=Ps),Ms.prototype.run=function(t){var e=this,n=As.resolve();return this.element!==dh.scrollingElement&&this.element!==dh.documentElement&&(n=this._ensureElement(t,!0,!0)),n.then(function(){e.element.scrollLeft=e.scrollLeft,e.element.scrollTop=e.scrollTop})},Ms);function Ms(t,e,n){var i,o,r,s,l,a=e.x,u=e.y,c=e.position,h=e.byX,f=e.byY,d=Cs.call(this,t,n,fh,gs)||this;return c&&(o=t,r=c,s=Math.floor(o.scrollWidth/2-o.clientWidth/2),l=Math.floor(o.scrollHeight/2-o.clientHeight/2),a=(i={top:[s,0],right:[o.scrollWidth,l],bottom:[s,o.scrollHeight],left:[0,l],topRight:[o.scrollWidth,0],topLeft:[0,0],bottomRight:[o.scrollWidth,o.scrollHeight],bottomLeft:[0,o.scrollHeight],center:[s,l]}[r])[0],u=i[1]),d.scrollLeft="number"==typeof a?a:t.scrollLeft,d.scrollTop="number"==typeof u?u:t.scrollTop,h&&(d.scrollLeft+=h),f&&(d.scrollTop+=f),d}var Ds,Us=(_(Is,Ds=Ps),Is.prototype.run=function(t){return this._ensureElement(t,!0,!0)},Is);function Is(t,e){return Ds.call(this,t,e,fh,gs)||this}var ks=p.Promise,Bs=p.nativeMethods,Os=p.utils.browser,Ns=p.eventSandbox.focusBlur,Fs=y.contentEditable,Ls=y.textSelection,Ys=y.domUtils,Rs=y.styleUtils,Ks=p.eventSandbox.message,Ws="automation|iframe|request",Vs="automation|iframe|response";function Xs(v,g,E){var t=this;return new ks(function(p){return w(t,void 0,void 0,function(){var s,n,i,o,r,l,a,u,c,h,f,d,m;return P(this,function(t){switch(t.label){case 0:return Ir(fh)?[4,Or({cmd:Ws},Vs,fh.parent)]:[3,2];case 1:t.sent(),t.label=2;case 2:if(s=Ys.getActiveElement(),n=Ys.isTextEditableElement(v),i=Ys.closest(v,"label[for]"),o=Ys.isElementFocusable(v),r=!o&&i,l=Ys.isContentEditableElement(v),a=l?Fs.findContentEditableParent(v):v,g&&Os.isWebKit&&n&&Ls.select(v,0,0),r)return g&&(e=i,Ys.isElementFocusable(e)?Ns.focus(e,y.noop,!1,!0):qs(e)),p(),[2];if(u=!g,c=!1,!o&&!l){if(h=Ys.findDocument(a),f=Bs.documentActiveElementGetter.call(h),d=Ys.isBodyElement(f),m=Ys.isBodyElement(a)?a:Ys.getFocusableParent(a),f&&!d&&Ys.containsElement(f,a)||d&&Ys.isBodyElement(m))return p(),[2];a=m||h.body,c=!0}return Ns.focus(a,function(){var t,e,n,i,o,r;!g||l||v===Ys.getActiveElement()?(t=v,e=E,o=Ys.isTextEditableElement(t),r=Ys.isContentEditableElement(t),o||r?r&&isNaN(parseInt(e,10))?Ls.setCursorToLastVisiblePosition(t):(n=isNaN(parseInt(e,10))?Ys.getElementValue(t).length:e,Ls.select(t,n,n)):(i=Fs.findContentEditableParent(t))&&Ls.setCursorToLastVisiblePosition(Fs.findContentEditableParent(i)),g||Ys.getActiveElement()===s?p():Ns.focus(s,p,!0,!0)):p()},u,!0,!1,c),[2]}var e})})})}function Hs(t){var e=Ys.closest(t,"label[for]"),n=e&&(e.control||dh.getElementById(e.htmlFor));return n&&Rs.isElementVisible(n)?n:null}function qs(t){var e=Hs(t);e&&Ys.getActiveElement()!==e&&Ns.focus(e,y.noop,!1,!0)}Ks.on(Ks.SERVICE_MSG_RECEIVED_EVENT,function(t){var e;t.message.cmd===Ws&&(e=Ys.findIframeByWindow(t.source),Ns.focus(e,function(){Ks.sendServiceMsg({cmd:Vs},t.source)},!1))});var Gs=p.utils.browser,zs=p.eventSandbox.eventSimulator,js=p.eventSandbox.listeners,$s=p.nativeMethods,Qs=y.domUtils,Zs=y.styleUtils,Js=i.selectElement,tl=(el.prototype.run=function(){this.eventState.clickElement&&zs.click(this.eventState.clickElement,this.eventArgs.options),Qs.isElementFocusable(this.eventArgs.element)||qs(this.eventArgs.element)},el);function el(t,e){this.eventState=t,this.eventArgs=e}var nl,il=(_(ol,nl=tl),ol.prototype.run=function(){function t(t){n=$s.eventTargetGetter.call(t)===e.input}var e=this,n=!1;js.addInternalEventBeforeListener(fh,["focus"],t),nl.prototype.run.call(this),js.removeInternalEventBeforeListener(fh,["focus"],t),Qs.isElementFocusable(this.targetElement)&&!n&&this._ensureBoundElementFocusRaised()},ol.prototype._ensureBoundElementFocusRaised=function(){zs.focus(this.input)},ol);function ol(t,e){var n=nl.call(this,t,e)||this;return n.targetElement=n.eventArgs.element,n.input=Hs(n.eventArgs.element),n}var rl,sl=(_(ll,rl=tl),ll.prototype.run=function(){rl.prototype.run.call(this),this._toggleSelectOptionList()},ll.prototype._toggleSelectOptionList=function(){var t=this.eventArgs.element;1===Zs.getSelectElementSize(t)&&!1!==this.eventState.simulateDefaultBehavior&&(Js.isOptionListExpanded(t)?Js.collapseOptionList():Js.expandOptionList(t))},ll);function ll(t,e){return rl.call(this,t,e)||this}var al,ul=(_(cl,al=tl),cl.prototype.run=function(){return this.eventArgs.element},cl);function cl(t,e){return al.call(this,t,e)||this}var hl,fl=(_(dl,hl=il),dl.prototype.run=function(){function t(){e=!0}var e=!1;js.addInternalEventBeforeListener(fh,["change"],t),hl.prototype.run.call(this),js.removeInternalEventBeforeListener(fh,["change"],t),!Gs.isChrome||e||this.checkbox.disabled||this._isClickableElementInsideLabel(this.targetElement)||this._ensureCheckboxStateChanged()},dl.prototype._ensureCheckboxStateChanged=function(){this.checkbox.checked=!this.checkbox.checked,zs.change(this.checkbox)},dl.prototype._isClickableElementInsideLabel=function(t){var e=Qs.isAnchorElement(t)&&t.getAttribute("href"),n=Qs.isButtonElement(t);return e||n},dl);function dl(t,e){var n=hl.call(this,t,e)||this;return n.checkbox=n.input,n}var ml=p.Promise,pl=p.utils.browser,vl=p.utils.featureDetection,gl=p.eventSandbox.eventSimulator,El=p.eventSandbox.listeners,yl=y.domUtils,bl=y.eventUtils,Sl=y.arrayUtils,_l=(wl.prototype.mousedown=function(t){var e=this;this.targetElementParentNodes=yl.getParents(t.element),this.mouseDownElement=t.element,this._raiseTouchEvents(t);var n=yl.getActiveElement();this.activeElementBeforeMouseDown=n;var i=(pl.isWebKit||pl.isIE)&&yl.isSelectElement(this.mouseDownElement);return i&&this._bindMousedownHandler(),this._bindBlurHandler(n),this._isTouchEventWasCancelled()||(this.eventState.simulateDefaultBehavior=gl.mousedown(t.element,t.options)),!1===this.eventState.simulateDefaultBehavior&&(this.eventState.simulateDefaultBehavior=i&&!this.eventState.mousedownPrevented),this._ensureActiveElementBlur(n).then(function(){return e._focus(t)})},wl.prototype.mouseup=function(t,e){var n,i,o,r,s;e.element=t,this.eventState.clickElement=(n=this.mouseDownElement,i=t,o=this.targetElementParentNodes,r=yl.getParents(i),s=yl.isTheSameNode(i,n),pl.isFirefox?s?n:null:s?Sl.equals(o,r)?n:null:n.contains(i)&&!yl.isEditableFormElement(i)?n:i.contains(n)?i:Sl.getCommonElement(r,o));var l={},a=function(t){l=t.timeStamp,El.removeInternalEventBeforeListener(fh,["mouseup"],a)};return pl.isIE||El.addInternalEventBeforeListener(fh,["mouseup"],a),this._isTouchEventWasCancelled()||gl.mouseup(t,e.options),e.options&&(e.options.timeStamp=l),this._click(e)},wl.prototype._click=function(u){return w(this,void 0,p.Promise,function(){var a;return P(this,function(t){var e,n,i,o,r,s,l;return e=this.eventState,i=Hs((n=u).element),o=Qs.isSelectElement(n.element),r=Qs.isOptionElement(n.element),s=Qs.isLabelElement(n.element)&&i,l=i&&Qs.isCheckboxElement(i),a=new(o?sl:r?ul:l?fl:s?il:tl)(e,n),this._isTouchEventWasCancelled()||a.run(),[2,u]})})},wl.prototype._isTouchEventWasCancelled=function(){return this.eventState.touchStartCancelled||this.eventState.touchEndCancelled},wl.prototype._bindMousedownHandler=function(){var e=this,n=function(t){e.eventState.mousedownPrevented=t.defaultPrevented,bl.preventDefault(t),bl.unbind(e.element,"mousedown",n)};bl.bind(this.element,"mousedown",n)},wl.prototype._bindBlurHandler=function(t){var e=this,n=function(){e.eventState.blurRaised=!0,bl.unbind(t,"blur",n,!0)};bl.bind(t,"blur",n,!0)},wl.prototype._ensureActiveElementBlur=function(e){var n=this;return new ml(function(t){yl.getActiveElement()===e||n.eventState.blurRaised?t():pl.isIE&&pl.version<12?Ot().then(function(){n.eventState.blurRaised||gl.blur(e),t()}):(gl.blur(e),t())})},wl.prototype._focus=function(t){return!1===this.eventState.simulateDefaultBehavior?ml.resolve():Xs(yl.isContentEditableElement(this.element)?this.element:t.element,!pl.isIE||this.activeElementBeforeMouseDown===yl.getActiveElement(),this.caretPos)},wl.prototype._raiseTouchEvents=function(t){vl.isTouchDevice&&(this.eventState.touchStartCancelled=!gl.touchstart(t.element,t.options),this.eventState.touchEndCancelled=!gl.touchend(t.element,t.options))},wl);function wl(t,e){this.element=t,this.caretPos=e,this.targetElementParentNodes=[],this.activeElementBeforeMouseDown=null,this.mouseDownElement=null,this.eventState={mousedownPrevented:!1,blurRaised:!1,simulateDefaultBehavior:!0,clickElement:null,touchStartCancelled:!1,touchEndCancelled:!1}}var Pl,xl=(_(Cl,Pl=Ps),Cl.prototype._mousedown=function(t){return this.strategy.mousedown(t)},Cl.prototype._mouseup=function(t,e){return this.strategy.mouseup(t,e)},Cl.prototype.run=function(t){var r,s=this;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint,i=t.screenPoint,o=t.devicePoint;return r={point:n,screenPoint:i,element:e,options:m.utils.extend({clientX:null==n?void 0:n.x,clientY:null==n?void 0:n.y,screenX:null==o?void 0:o.x,screenY:null==o?void 0:o.y},s.modifiers)},m.Promise.all([Bt(s.automationSettings.mouseActionStepDelay),s.cursor.leftButtonDown().then(function(){return s._mousedown(r)})])}).then(function(){return s.cursor.buttonUp()}).then(function(){return s._getElementForEvent(r)}).then(function(t){return t?s._mouseup(t,r):null})},Cl);function Cl(t,e,n,i){var o,r,s=Pl.call(this,t,e,n,i)||this;return s.modifiers=e.modifiers,s.strategy=(o=s.element,r=e.caretPos,new _l(o,r)),s}function Al(t,e,n){var i=function(t,e,n){if(e.y-t.y==0)return 0;var i=(e.x-t.x)/(e.y-t.y),o=t.y*(t.x-e.x)/(e.y-t.y)+t.x;return Math.round(i*n+o)}(t,e,n.top);return i&&i>=n.left&&i<=n.right?new x(i,n.top):null}function Tl(t,e,n){var i=function(t,e,n){if(e.x===t.x)return 0;var i=(e.y-t.y)/(e.x-t.x),o=t.x*(t.y-e.y)/(e.x-t.x)+t.y;return Math.round(i*n+o)}(t,e,n.left);return i&&i>=n.top&&i<=n.bottom?new x(n.left,i):null}function Ml(t,e,n){for(var i=[],o=0,r=[{left:n.left,top:n.top,right:n.left,bottom:n.bottom,isHorizontal:!1},{left:n.right,top:n.top,right:n.right,bottom:n.bottom,isHorizontal:!1},{left:n.left,top:n.top,right:n.right,bottom:n.top,isHorizontal:!0},{left:n.left,top:n.bottom,right:n.right,bottom:n.bottom,isHorizontal:!0}];o<r.length;o++){var s=r[o],l=(s.isHorizontal?Al:Tl)(t,e,s);l&&i.push(l)}return i.length?1===i.length||i[0].distance(t)<i[1].distance(t)?i[0]:i[1]:null}var Dl=p.eventSandbox.eventSimulator,Ul=p.eventSandbox.message,Il=y.positionUtils,kl=y.domUtils,Bl=y.styleUtils,Ol="automation|move|response";Ul.on(Ul.SERVICE_MSG_RECEIVED_EVENT,function(t){var e,n,i,o,r,s,l,a,u,c,h,f,d;"automation|move|request"===t.message.cmd&&(t.source.parent===fh?(n=new x((e=t).message.endX,e.message.endY),i=e.source,o=kl.findIframeByWindow(i),r=Bl.getBordersWidth(o),s=Bl.getElementPadding(o),l=Il.getIframeClientCoordinates(o),a=Il.getIframePointRelativeToParentFrame(n,i),u=gs.getPosition(),c=Il.isInRectangle(u,l)?u:Ml(u,a,l),h={x:c.x-l.left,y:c.y-l.top},f=new Qo({modifiers:e.message.modifiers,offsetX:h.x+r.left+s.left,offsetY:h.y+r.top+s.top,speed:e.message.speed,skipScrolling:!0},!1),d={cmd:Ol,x:h.x,y:h.y},gs.getActiveWindow(fh)!==i?fs.create(o,f,fh,gs).then(function(t){return t.run()}).then(function(){gs.setActiveWindow(i),Ul.sendServiceMsg(d,i)}):Ul.sendServiceMsg(d,i)):(p.on(p.EVENTS.beforeUnload,function(){return Ul.sendServiceMsg({cmd:Ol},t.source)}),function(t){var e=t.source,n={left:t.message.left,right:t.message.right,top:t.message.top,bottom:t.message.bottom};if(!t.message.iframeUnderCursor){var i=t.message,o=i.startX,r=i.startY,s=o-n.left,l=r-n.top,a=Mr();return a&&(Dl.mouseout(a,{clientX:s,clientY:l,relatedTarget:null}),Dl.mouseleave(a,{clientX:s,clientY:l,relatedTarget:null})),Ul.sendServiceMsg({cmd:Ol},e)}var u,c=gs.getPosition(),h=Ml(x.create(n).add(c),new x(t.message.endX,t.message.endY),n);h?(u=new Qo({modifiers:t.message.modifiers,offsetX:h.x-n.left,offsetY:h.y-n.top,speed:t.message.speed,skipScrolling:!0},!1),fs.create(dh.documentElement,u,fh,gs).then(function(t){return t.run()}).then(function(){var t={cmd:Ol,x:h.x,y:h.y};gs.setActiveWindow(e),Ul.sendServiceMsg(t,e)})):Ul.sendServiceMsg({cmd:Ol,x:n.left,y:n.top},e)}(t)))});var Nl=p.Promise,Fl=p.utils.browser,Ll=p.utils.featureDetection,Yl=p.eventSandbox.eventSimulator,Rl=p.eventSandbox.focusBlur,Kl=p.nativeMethods,Wl=y.domUtils,Vl=y.styleUtils,Xl=y.delay,Hl=i.selectElement,ql=Ll.isTouchDevice?0:160,Gl=(zl.prototype._calculateEventArguments=function(){var t=this.optionListExpanded?Hl.getEmulatedChildElement(this.element):this.element,e=1<Vl.getSelectElementSize(this.parentSelect);return{options:this.modifiers,element:Fl.isIE&&e?this.parentSelect:t}},zl.prototype._getMoveArguments=function(){var t,e,n=null,i=null,o=null;return o=this.optionListExpanded?(i=(t=_t(n=Hl.getEmulatedChildElement(this.element))).offsetX,t.offsetY):(n=dh.documentElement,i=(e=Hl.getSelectChildCenter(this.element)).x,e.y),{element:n,offsetX:i,offsetY:o,speed:this.speed}},zl.prototype._move=function(t){var e=this,n=t.element,i=t.offsetX,o=t.offsetY,r=t.speed,s=new Qo({offsetX:i,offsetY:o,speed:r,modifiers:this.modifiers},!1);return fs.create(n,s,fh,gs).then(function(t){return t.run()}).then(function(){return Xl(e.automationSettings.mouseActionStepDelay)})},zl.prototype._mousedown=function(){var t=this;return Fl.isFirefox?(Yl.mousedown(this.eventsArgs.element,this.eventsArgs.options),this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex),this._focus()):Fl.isIE?(Yl.mousedown(this.eventsArgs.element,this.eventsArgs.options),this._focus()):this._focus().then(function(){return Xl(ql)}).then(function(){Yl.mousedown(t.eventsArgs.element,t.eventsArgs.options),t.clickCausesChange&&(t.parentSelect.selectedIndex=t.childIndex)})},zl.prototype._focus=function(){var e=this;return new Nl(function(t){Rl.focus(e.parentSelect,t,!1,!0)})},zl.prototype._mouseup=function(){var t=Fl.isIE?this.parentSelect:this.eventsArgs.element;Yl.mouseup(t,this.eventsArgs.options),Fl.isIE&&this.clickCausesChange&&(this.parentSelect.selectedIndex=this.childIndex);var e=Fl.isFirefox||Fl.isSafari||Fl.isChrome&&53<=Fl.version,n=e||Fl.isIE;return e&&this.clickCausesChange&&Yl.input(this.parentSelect),n&&this.clickCausesChange&&Yl.change(this.parentSelect),Nl.resolve()},zl.prototype._click=function(){Yl.click(this.eventsArgs.element,this.eventsArgs.options)},zl.prototype.run=function(){var t=this;if(!this.parentSelect)return Yl.click(this.eventsArgs.element,this.eventsArgs.options),Nl.resolve();this.optionListExpanded||Hl.scrollOptionListByChild(this.element);var e=this._getMoveArguments();return this.eventsArgs=this._calculateEventArguments(),Vl.getSelectElementSize(this.parentSelect)<=1?this._move(e).then(function(){return t._click()}):this._move(e).then(function(){return t._mousedown()}).then(function(){return t._mouseup()}).then(function(){return t._click()})},zl);function zl(t,e){var n,i,o,r,s;this.element=t,this.modifiers=e.modifiers,this.caretPos=e.caretPos,this.offsetX=e.offsetX,this.offsetY=e.offsetY,this.speed=e.speed,this.automationSettings=new Dt(e.speed),this.parentSelect=Wl.getSelectParent(this.element),this.optionListExpanded=!!this.parentSelect&&Hl.isOptionListExpanded(this.parentSelect),this.childIndex=null,this.clickCausesChange=!1,this.parentSelect&&(n=Wl.isOptionElement(this.element),i=this.parentSelect.selectedIndex,this.childIndex=Wl.getElementIndexInParent(this.parentSelect,this.element),o=Kl.nodeParentNodeGetter.call(this.element),r=Wl.isOptionGroupElement(o)?o:null,s=this.element.disabled||r&&r.disabled,this.clickCausesChange=n&&!s&&this.childIndex!==i),this.eventsArgs={options:this.modifiers,element:this.element}}var jl,$l=p.utils.featureDetection,Ql=p.utils.browser,Zl=p.eventSandbox.eventSimulator,Jl=y.eventUtils,ta=y.delay,ea=$l.isTouchDevice?0:160,na=(_(ia,jl=Ps),ia.prototype._firstClick=function(t){var e=this,n=new zo(this.options);n.speed=1;var i=new xl(this.element,n,fh,gs);return i.on(i.TARGET_ELEMENT_FOUND_EVENT,function(t){return e.emit(e.TARGET_ELEMENT_FOUND_EVENT,t)}),i.run(t).then(function(t){return ta(ea).then(function(){return t})})},ia.prototype._secondClick=function(t){var e=this;Ql.isIE&&Jl.bind(dh,"focus",Jl.preventDefault,!0);var n=new zo({offsetX:t.screenPoint.x,offsetY:t.screenPoint.y,caretPos:this.caretPos,modifiers:this.modifiers,speed:1}),i=new xl(dh.documentElement,n,fh,gs);return i.run().then(function(t){return e.eventState.dblClickElement=i.strategy.eventState.clickElement,Ql.isIE&&Jl.unbind(dh,"focus",Jl.preventDefault,!0),t})},ia.prototype._dblClick=function(t){this.eventState.dblClickElement&&Zl.dblclick(this.eventState.dblClickElement,t.options)},ia.prototype.run=function(t){var e=this;return this._firstClick(t).then(function(t){return e._secondClick(t)}).then(function(t){return e._dblClick(t)})},ia);function ia(t,e){var n=jl.call(this,t,e,fh,gs)||this;return n.modifiers=e.modifiers,n.caretPos=e.caretPos,n.speed=e.speed,n.automationSettings=new Dt(n.speed),n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.eventArgs=null,n.eventState={dblClickElement:null},n}var oa,ra=function(){this.enabled=!1,this.dropAllowed=!1,this.element=null,this.dataTransfer=null,this.dataStore=null},sa=p.nativeMethods,la=p.utils.featureDetection,aa=p.utils.html,ua=p.utils.url,ca=p.eventSandbox.DataTransfer,ha=p.eventSandbox.DragDataStore,fa=y.eventUtils,da=y.domUtils,ma=(_(pa,oa=fs),pa.create=function(o,r,s,l){return w(this,void 0,void 0,function(){var e,n,i;return P(this,function(t){switch(t.label){case 0:return[4,fs.getTarget(o,s,new x(r.offsetX,r.offsetY))];case 1:return e=t.sent(),n=e.element,i=e.offset,[2,new pa(n,i,r,s,l)]}})})},pa.prototype._getCursorSpeed=function(){return this.automationSettings.draggingSpeed},pa.prototype._getEventSequenceOptions=function(t){var e=oa.prototype._getEventSequenceOptions.call(this,t),n=e.eventOptions,i=e.eventSequenceOptions;return n.dataTransfer=this.dragAndDropState.dataTransfer,n.buttons=fa.BUTTONS_PARAMETER.leftButton,i.holdLeftButton=!0,{eventOptions:n,eventSequenceOptions:i}},pa.prototype._getCorrectedTopElement=function(t){return this.touchMode?this.dragElement:t},pa.prototype._runEventSequence=function(t,e){var n=e.eventOptions,i=e.eventSequenceOptions,o=hs(this.dragAndDropState.enabled,this.firstMovingStepOccured,i).run(t,Mr(),n,this.dragElement,this.dragAndDropState.dataStore),r=o.dragAndDropMode,s=o.dropAllowed;this.dragAndDropState.enabled=r,this.dragAndDropState.dropAllowed=s},pa.prototype._needMoveCursorImmediately=function(){return!1},pa.prototype.run=function(){var l=this;return Tt(this.cursor.getPosition()).then(function(t){l.dragElement=t;var e,n,i,o,r,s=function(t){for(var e=t;e;){if(e.draggable)return e;e=sa.nodeParentNodeGetter.call(e)}return null}(l.dragElement);return s&&la.hasDataTransfer&&!l.skipDefaultDragBehavior&&(l.dragAndDropState.enabled=!0,l.dragElement=s,l.dragAndDropState.element=l.dragElement,l.dragAndDropState.dataStore=new ha,l.dragAndDropState.dataTransfer=new ca(l.dragAndDropState.dataStore),((e=da.isAnchorElement(l.dragElement))||da.isImgElement(l.dragElement))&&(n=e?"href":"src",o=(i=ua.parseProxyUrl(l.dragElement[n]))?i.destUrl:l.dragElement[n],r=aa.cleanUpHtml(sa.elementOuterHTMLGetter.call(l.dragElement)),l.dragAndDropState.dataTransfer.setData("text/plain",o),l.dragAndDropState.dataTransfer.setData("text/uri-list",o),l.dragAndDropState.dataTransfer.setData("text/html",r))),oa.prototype.run.call(l).then(function(){return l.dragAndDropState})})},pa);function pa(t,e,n,i,o){var r=oa.call(this,t,e,n,i,o)||this;return r.dragElement=null,r.dragAndDropState=new ra,r}var va,ga=p.Promise,Ea=p.utils.extend,ya=p.utils.featureDetection,ba=p.eventSandbox.eventSimulator,Sa=p.eventSandbox.focusBlur,_a=(_(wa,va=Ps),wa.prototype._getEndPoint=function(){throw new Error("Not implemented")},wa.prototype._mousedown=function(t){var e=this;return gs.leftButtonDown().then(function(){return e.simulateDefaultBehavior=ba[e.downEvent](t.element,t.options),e._focus(t)})},wa.prototype._focus=function(n){var i=this;return new ga(function(t){var e=g.domUtils.isContentEditableElement(i.element)?g.contentEditable.findContentEditableParent(i.element):n.element;Sa.focus(e,t,!1,!0)})},wa.prototype._getDestination=function(){throw new Error("Not implemented")},wa.prototype._drag=function(){var r=this;return this._getDestination().then(function(t){var e=t.element,n=t.offsets,i=t.endPoint;r.endPoint=i;var o=new Qo({offsetX:n.offsetX,offsetY:n.offsetY,modifiers:r.modifiers,speed:r.speed,minMovingTime:25,skipDefaultDragBehavior:!1===r.simulateDefaultBehavior},!1);return ma.create(e,o,fh,gs)}).then(function(t){return t.run()}).then(function(t){return r.dragAndDropState=t,g.delay(r.automationSettings.mouseActionStepDelay)})},wa.prototype._mouseup=function(){var o=this;return gs.buttonUp().then(function(){var e=g.positionUtils.offsetToClientCoords(o.endPoint),n=null,i=Ea({clientX:e.x,clientY:e.y},o.modifiers);return Tt(e).then(function(t){return(n=t)?(o.dragAndDropState.enabled?(i.dataTransfer=o.dragAndDropState.dataTransfer,o.dragAndDropState.dropAllowed&&ba.drop(n,i),ba.dragend(o.dragAndDropState.element,i),o.dragAndDropState.dataStore.setProtectedMode()):ba[o.upEvent](n,i),Tt(e)):n}).then(function(t){n&&t===n&&!o.dragAndDropState.enabled&&ba.click(n,i)})})},wa.prototype.run=function(t){var i,o=this;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint;return i={point:n,element:e,options:Ea({clientX:n.x,clientY:n.y},o.modifiers)},ga.all([g.delay(o.automationSettings.mouseActionStepDelay),o._mousedown(i)])}).then(function(){return o._drag()}).then(function(){return o._mouseup()})},wa);function wa(t,e){var n=va.call(this,t,e,fh,gs)||this;return n.modifiers=e.modifiers,n.speed=e.speed,n.offsetX=e.offsetX,n.offsetY=e.offsetY,n.endPoint=null,n.simulateDefaultBehavior=!0,n.downEvent=ya.isTouchDevice?"touchstart":"mousedown",n.upEvent=ya.isTouchDevice?"touchend":"mouseup",n.dragAndDropState=null,n}var Pa,xa=y.styleUtils,Ca=(_(Aa,Pa=_a),Aa.prototype._getDestination=function(){return w(this,void 0,void 0,function(){var e,n,i,o;return P(this,function(t){switch(t.label){case 0:return[4,pt(this.element,{x:this.offsetX,y:this.offsetY})];case 1:return e=t.sent(),n=xa.getWidth(dh),i=xa.getHeight(dh),o={x:e.x+this.dragOffsetX,y:e.y+this.dragOffsetY},o={x:Math.min(Math.max(0,o.x),n),y:Math.min(Math.max(0,o.y),i)},[2,{element:dh.documentElement,offsets:{offsetX:o.x,offsetY:o.y},endPoint:o}]}})})},Aa);function Aa(t,e,n,i){var o=Pa.call(this,t,i)||this;return o.dragOffsetX=e,o.dragOffsetY=n,o}var Ta,Ma=y.positionUtils,Da=(_(Ua,Ta=_a),Ua.prototype._getDestination=function(){return w(this,void 0,void 0,function(){var e,n,i,o;return P(this,function(t){return e=this.destinationElement,n=Ma.getElementRectangle(e),i=wt(e,this.destinationOffsetX,this.destinationOffsetY),o={x:n.left+i.offsetX,y:n.top+i.offsetY},[2,{element:e,offsets:i,endPoint:o}]})})},Ua);function Ua(t,e,n){var i=Ta.call(this,t,n)||this;return i.destinationElement=e,i.destinationOffsetX=n.destinationOffsetX,i.destinationOffsetY=n.destinationOffsetY,i}var Ia,ka=(_(Ba,Ia=Ps),Ba.prototype.run=function(t){return this._ensureElement(t,!0)},Ba);function Ba(t,e){return Ia.call(this,t,e,fh,gs)||this}var Oa=p.utils.browser,Na=p.sandbox.event,Fa=p.eventSandbox.eventSimulator,La=p.eventSandbox.listeners,Ya=p.nativeMethods,Ra=y.domUtils,Ka=y.contentEditable,Wa=y.textSelection,Va=/ /g;function Xa(t){var e=Wa.getSelectionByElement(t),n=Wa.hasInverseSelectionContentEditable(t);return Wa.hasElementContainsSelection(t)?Ka.getSelection(t,e,n):{startPos:Ka.calculateNodeAndOffsetByPosition(t,0),endPos:Ka.calculateNodeAndOffsetByPosition(t,0)}}function Ha(t){var e=t.startPos.node,n=t.startPos.offset,i=t.endPos.offset,o=Ka.getFirstNonWhitespaceSymbolIndex(e.nodeValue),r=Ka.getLastNonWhitespaceSymbolIndex(e.nodeValue);return n<o&&0!==n?(t.startPos.offset=o,t.endPos.offset=i+o-n):r<i&&i!==e.nodeValue.length&&(t.startPos.offset=e.nodeValue.length,t.endPos.offset=i+e.nodeValue.length-n),t}function qa(t,e,n){return!n||Fa.beforeInput(t,e)}function Ga(t,e){var n;function i(t){t.preventDefault(),n=!0}function o(t){"textInput"===t.type&&(n=!1)}Oa.isSafari&&(La.addInternalEventBeforeListener(fh,["textInput"],i),Na.on(Na.EVENT_PREVENTED_EVENT,o));var r=Oa.isFirefox||Fa.textInput(t,e)||n;return Oa.isSafari&&(La.removeInternalEventBeforeListener(fh,["textInput"],i),Na.off(Na.EVENT_PREVENTED_EVENT,o)),r||Oa.isIE11}function za(t,e){var n,i,o,r,s,l,a,u,c,h,f,d=Xa(t),m=d.startPos.node,p=d.endPos.node,v=!0,g=!0,E=e;function y(){g=!1}function b(t,e,n){n()}e=e.replace(Va,String.fromCharCode(160)),m&&p&&Ra.isContentEditableElement(m)&&Ra.isContentEditableElement(p)&&(Ra.isTheSameNode(m,p)||(Wa.deleteSelectionContents(t),n=t,o=(i=d).startPos.node,r=Ya.nodeParentNodeGetter.call(o)&&o.parentElement,!(Oa.isChrome&&Oa.version<58||Oa.isSafari)&&r&&Ra.isElementContainsNode(n,o)||(i=Xa(n),Wa.hasInverseSelectionContentEditable(n)&&(i={startPos:i.endPos,endPos:i.startPos})),i.endPos.offset=i.startPos.offset,m=(d=i).startPos.node),m&&Ra.isContentEditableElement(m)&&Ra.isRenderedNode(m)&&qa(t,e,Oa.isChrome||Oa.isFirefox)&&(v=Ga(t,E),g=v&&!Oa.isIE11,La.addInternalEventBeforeListener(fh,["input"],y),La.addInternalEventBeforeListener(fh,["textinput"],b),(v=v&&qa(t,e,Oa.isSafari))&&(Ra.isElementNode(m)?(s=m,l=e,c=dh.createTextNode(l),h={node:c,offset:l.length},f=Ya.nodeParentNodeGetter.call(s),"br"===Ra.getTagName(s)?f.insertBefore(c,s):0<a?(u=Ya.nodeChildNodesGetter.call(s),s.insertBefore(c,u[a])):s.appendChild(c),Wa.selectByNodesAndOffsets(h,h)):function(t,e,n){var i=e.startPos.node;Ra.isElementContainsNode(t,i)||(i=(e=Ha(Xa(t))).startPos.node);var o=e.startPos.offset,r=e.endPos.offset,s=i.nodeValue,l={node:i,offset:o+n.length};i.nodeValue=s.substring(0,o)+n+s.substring(r,s.length),Wa.selectByNodesAndOffsets(l,l)}(t,Ha(d),e)),Ot().then(function(){g&&Fa.input(t,e),La.removeInternalEventBeforeListener(fh,["input"],y),La.removeInternalEventBeforeListener(fh,["textinput"],b)})))}function ja(t,e,n){var i,o,r,s,l,a,u,c,h,f,d,m,p;Ra.isContentEditableElement(t)&&za(t,e),Ra.isElementReadOnly(t)||(Ra.isTextEditableElement(t)?(l=t,a=e,h=Ra.getElementValue(l),f=a.length,d=Wa.getSelectionStart(l),m=Wa.getSelectionEnd(l),p=Ra.isInputElement(l)&&"number"===l.type,qa(l,a,Oa.isChrome||Oa.isFirefox)&&Ga(l,a)&&qa(l,a,Oa.isSafari)&&((u=!Oa.isIE&&p?null:parseInt(l.maxLength,10))<0&&(u=Oa.isIE&&Oa.version<17?0:null),c=h.substring(0,d)+a+h.substring(m,h.length),(null===u||isNaN(u)||c.length<=u)&&(p&&Oa.isIOS&&"."===h[h.length-1]&&(d+=1),Ra.setElementValue(l,c),Wa.select(l,d+f,d+f)),Fa.input(l,a))):Ra.isInputElement(t)&&(i=t,o=e,null!==(r=n)?(s=Ra.getElementValue(i),Ra.setElementValue(i,s.substr(0,r)+o+s.substr(r+o.length))):Ra.setElementValue(i,o),Fa.change(i),Fa.input(i,o)))}function $a(t){return 1===t.length&&("a"<=t&&t<="z"||"A"<=t&&t<="Z")}var Qa=p.nativeMethods,Za=p.utils.browser,Ja=p.eventSandbox.focusBlur,tu=p.Promise,eu=g.domUtils.isRadioButtonElement,nu=g.domUtils.getActiveElement,iu=g.domUtils.getTabIndexAttributeIntValue;function ou(t){return t===t.toLowerCase()?t.toUpperCase():t.toLowerCase()}function ru(t){var e=nu(t||dh),n=null;if(e&&g.domUtils.isIframeElement(e)&&Qa.contentDocumentGetter.call(e))try{n=ru(Qa.contentDocumentGetter.call(e))}catch(t){}return n||e}function su(t,e,n){if(!eu(e))return t;if(!n&&!e.name&&!Za.isChrome)return[e];var i,o,r=(i=e,o=null,n?""===i.name||Za.isFirefox||(o=function(t){return!t.name||t===i||t.name!==i.name}):""!==i.name?o=function(t){return eu(t)&&t.name===i.name}:Za.isChrome&&(o=function(t){return eu(t)&&!t.name}),o);return r&&(t=g.arrayUtils.filter(t,r)),t}function lu(t,e,n){var i,o,r,s,l,a,u,c,h=e?-1:1,f=g.domUtils.getTopSameDomainWindow(fh).document,d=(i=f,o=Qa.documentActiveElementGetter.call(i),r=o&&iu(o),!(o&&r<0)),m=su(m=g.domUtils.getFocusableElements(f,d),t,n),p=eu(t),v=g.arrayUtils.indexOf(m,t);return(e?0===v:v===m.length-1)?!e&&t.tabIndex<0?g.arrayUtils.find(m,function(t){return 0===t.tabIndex}):n||!p?dh.body:m[m.length-1-v]:e&&-1===v?m[m.length-1]:(l=(s=m)[v+h],a=n,u=eu(l)&&l.name&&!l.checked,c=null,a&&u&&(c=g.arrayUtils.find(s,function(t){return eu(t)&&t.name===l.name&&t.checked})),c||l)}function au(t){if($a(t))return t.toUpperCase().charCodeAt(0);var e=g.KEY_MAPS.shiftMap[t]?g.KEY_MAPS.shiftMap[t].charCodeAt(0):t.charCodeAt(0);return g.KEY_MAPS.symbolCharCodeToKeyCode[e]||e}var uu={SPECIAL_KEYS:{capslock:"CapsLock",delete:"U+007F",end:"End",enter:"Enter",esc:"U+001B",home:"Home",ins:"Insert",pagedown:"PageDown",pageup:"PageUp",space:"U+0020",tab:"Tab",alt:"Alt",ctrl:"Control",meta:"Meta",shift:"Shift"},LETTERS:{a:"U+0041",b:"U+0042",c:"U+0043",d:"U+0044",e:"U+0045",f:"U+0046",g:"U+0047",h:"U+0048",i:"U+0049",j:"U+004A",k:"U+004B",l:"U+004C",m:"U+004D",n:"U+004E",o:"U+004F",p:"U+0050",q:"U+0051",r:"U+0052",s:"U+0053",t:"U+0054",u:"U+0055",v:"U+0056",w:"U+0057",x:"U+0058",y:"U+0059",z:"U+005A"},SYMBOLS:{0:"U+0030",1:"U+0031",2:"U+0032",3:"U+0033",4:"U+0034",5:"U+0035",6:"U+0036",7:"U+0037",8:"U+0038",9:"U+0039"," ":"U+0020","!":"U+0021","@":"U+0040","#":"U+0023",$:"U+0024","%":"U+0025","^":"U+005E","*":"U+002A","(":"U+0028",")":"U+0029",_:"U+005F","|":"U+007C","\\":"U+005C","/":"U+002F","?":"U+003F",".":"U+002E",",":"U+002C","<":"U+003C",">":"U+003E","[":"U+005B","]":"U+005D","{":"U+007B","}":"U+007D","":"U+00A7","":"U+00B1","'":"U+0027",'"':"U+0022",":":"U+003A",";":"U+003B","`":"U+0060","~":"U+007E"}};function cu(t){return $a(t)?uu.LETTERS[t.toLowerCase()]:uu.SYMBOLS[t]||uu.SPECIAL_KEYS[t]||t}function hu(t,e,n){var i={};return"keyIdentifier"in KeyboardEvent.prototype&&(i.keyIdentifier=t?"":n),"key"in KeyboardEvent.prototype&&(i.key=e),i}var fu=p.utils.browser,du=p.utils.extend,mu=p.eventSandbox.eventSimulator,pu=(vu._isKeyActivatedInputElement=function(t){return g.domUtils.isInputElement(t)&&/button|submit|reset|radio|checkbox/.test(t.type)},vu.prototype._type=function(t,e){var n,i=t!==this.storedActiveElement,o=!i,r=t,s=g.domUtils.isEditableElement(t),l=g.domUtils.isEditableElement(this.storedActiveElement);try{i&&(n=g.domUtils.isElementInIframe(t)===g.domUtils.isElementInIframe(this.storedActiveElement)||l,o=(!fu.isFirefox||l)&&(!fu.isWebKit||n))}catch(t){}o&&(!fu.isIE&&i&&l&&s&&(r=this.storedActiveElement),ja(r,e))},vu.prototype._addKeyPropertyToEventOptions=function(t){return du(t,hu("keypress"===t.type,this.keyProperty,this.keyIdentifierProperty)),t},vu.prototype.down=function(t){this.storedActiveElement=ru(this.topSameDomainDocument),this.modifierKeyCode&&(t[this.sanitizedKey]=!0),t.shift&&this.isLetter&&(this.keyProperty=ou(this.keyProperty));var e={keyCode:this.keyCode,type:"keydown"};return this._addKeyPropertyToEventOptions(e),mu.keydown(this.storedActiveElement,du(e,t))},vu.prototype.press=function(t){if(!this.isChar&&!this.specialKeyCode)return!0;var e=ru(this.topSameDomainDocument),n=this.isChar?function(t,e){if("space"===t)return" ";if(e){if($a(t))return ou(t);if(g.KEY_MAPS.reversedShiftMap[t])return g.KEY_MAPS.reversedShiftMap[t]}return t}(this.sanitizedKey,t.shift):null,i=this.specialKeyCode||n.charCodeAt(0),o=e!==this.storedActiveElement;if(fu.isWebKit&&o&&g.domUtils.isElementInIframe(e)!==g.domUtils.isElementInIframe(this.storedActiveElement))return!0;this.storedActiveElement=e;var r={keyCode:i,charCode:i,type:"keypress"};this._addKeyPropertyToEventOptions(r);var s=fu.isAndroid||mu.keypress(e,du(r,t));if(!s)return s;e=ru(this.topSameDomainDocument),!n||t.ctrl||t.alt||this._type(e,n);var l=vu._isKeyActivatedInputElement(e),a=g.domUtils.isButtonElement(e),u=fu.isSafari&&0<=fu.compareVersions([fu.webkitVersion,"603.1.30"]),c=fu.isFirefox&&l;return fu.isFirefox&&!c||u||!l&&!a||"enter"!==this.sanitizedKey||e.click(),s},vu.prototype.up=function(t){this.modifierKeyCode&&(t[this.sanitizedKey]=!1);var e={keyCode:this.keyCode,type:"keyup"};this._addKeyPropertyToEventOptions(e);var n=mu.keyup(ru(this.topSameDomainDocument),du(e,t)),i=ru(this.topSameDomainDocument);return!fu.isFirefox&&!fu.isSafari&&(!fu.isChrome||53<=fu.version)&&n&&"space"===this.sanitizedKey&&vu._isKeyActivatedInputElement(i)&&i.click(),n},Object.defineProperty(vu.prototype,"key",{get:function(){return this.sanitizedKey},enumerable:!1,configurable:!0}),vu);function vu(t,e){this.isLetter=$a(t),this.isChar=1===t.length||"space"===t,this.sanitizedKey=g.getSanitizedKey(t),this.modifierKeyCode=g.KEY_MAPS.modifiers[this.sanitizedKey],this.specialKeyCode=g.KEY_MAPS.specialKeys[this.sanitizedKey],this.keyCode=null,this.keyIdentifierProperty=cu(e),this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(fh).document,this.keyProperty=g.KEY_MAPS.keyProperty[e]||e,this.isChar&&"space"!==t?this.keyCode=au(this.sanitizedKey):this.modifierKeyCode?this.keyCode=this.modifierKeyCode:this.specialKeyCode&&(this.keyCode=this.specialKeyCode),this.storedActiveElement=null}var gu,Eu={ctrlA:"ctrl+a",backspace:"backspace",delete:"delete",left:"left",right:"right",up:"up",down:"down",shiftLeft:"shift+left",shiftRight:"shift+right",shiftUp:"shift+up",shiftDown:"shift+down",shiftHome:"shift+home",shiftEnd:"shift+end",home:"home",end:"end",enter:"enter",tab:"tab",shiftTab:"shift+tab",esc:"esc"},yu=p.Promise,bu=p.utils.browser,Su=p.eventSandbox.eventSimulator,_u=p.eventSandbox.elementEditingWatcher,wu=y.textSelection,Pu=y.eventUtils,xu=y.domUtils,Cu=i.selectElement,Au=null,Tu=null;function Mu(){Tu=Au=null,Pu.unbind(this,"blur",Mu,!0)}function Du(t){var e,n,i,o;xu.isTextAreaElement(t)&&(Au!==t&&(Pu.bind(t,"blur",Mu,!0),Au=t),e=t,n=wu.hasInverseSelection(e),i=xu.getTextAreaValue(e),o=n?wu.getSelectionStart(e):wu.getSelectionEnd(e),Tu=i&&o?xu.getTextareaIndentInLine(e,o):0)}function Uu(t,e){var n,i,o,r,s,l,a=xu.getTextAreaValue(t);a&&(n=wu.getSelectionStart(t),i=wu.getSelectionEnd(t),o=wu.hasInverseSelection(t),s=(r=a.substring(0,o?n:i)).lastIndexOf("\n"),l=r.substring(0,s),null!==Tu&&Au===t||Du(t),s=l.lastIndexOf("\n"),ku(t,n,i,o,Math.min(s+1+Tu,l.length),e))}function Iu(t,e){var n,i,o,r,s,l,a,u,c,h,f=xu.getTextAreaValue(t);f&&(n=wu.getSelectionStart(t),i=wu.getSelectionEnd(t),u=(r=(o=wu.hasInverseSelection(t))?n:i)+(l=-1===(c=(s=f.substring(r)).indexOf("\n"))?s.length:c+1),h=-1===(c=(a=s.substring(l)).indexOf("\n"))?a.length:c,null!==Tu&&Au===t||Du(t),ku(t,n,i,o,u=Math.min(u+Tu,u+h),e))}function ku(t,e,n,i,o,r){var s=null,l=null,l=r?(s=e!==n&&i?n:e,o):s=o;wu.select(t,s,l)}function Bu(t,e,n){xu.isInputElement(t)&&"number"===t.type&&("-"===e.charAt(0)&&"."===e.charAt(1)&&(e=e.substring(1)),"."===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1))),xu.setElementValue(t,e),wu.select(t,n,n),Su.input(t)}function Ou(t,e){var n,i,o,r,s,l,a,u;return xu.isTextEditableElement(t)&&(n=wu.getSelectionStart(t),i=wu.getSelectionEnd(t),o=wu.hasInverseSelection(t),s=null,s=(r=!xu.isTextAreaElement(t)||xu.getTextareaLineNumberByPosition(t,n)===xu.getTextareaLineNumberByPosition(t,i))?o?i:n:o?n:i,a=-1===(l=xu.getElementValue(t).substring(0,s).lastIndexOf("\n"))?0:l+1,u=null,r?(u=e?s:a,wu.select(t,u,a)):o?wu.select(t,i,a):wu.select(t,n,a)),yu.resolve()}function Nu(t,e){var n,i,o,r,s,l,a,u,c;return xu.isTextEditableElement(t)&&(n=wu.getSelectionStart(t),i=wu.getSelectionEnd(t),o=wu.hasInverseSelection(t),s=null,u=s=(r=!xu.isTextAreaElement(t)||xu.getTextareaLineNumberByPosition(t,n)===xu.getTextareaLineNumberByPosition(t,i))?o?i:n:o?n:i,c=null,u+=-1===(a=(l=xu.getElementValue(t).substring(s)).indexOf("\n"))?l.length:a,r?(c=e?s:u,wu.select(t,c,u)):o?wu.select(t,i,u):wu.select(t,n,u)),yu.resolve()}function Fu(t){return Ou(t,!0)}function Lu(t){return Nu(t,!0)}function Yu(t){return xu.isRadioButtonElement(t)&&!bu.isFirefox}function Ru(t,e){return Ku(t,e,!1).then(function(t){t&&(t.checked=!0)})}function Ku(t,e,n){return void 0===n&&(n=!0),t?(xu.isSelectElement(t)&&Cu.collapseOptionList(),i=t,o=e,r=n,new tu(function(t){var e=lu(i,o,r);e?Ja.focus(e,function(){return t(e)}):t()}).then(function(t){return t&&xu.isTextEditableInput(t)&&wu.select(t),t})):yu.resolve();var i,o,r}var Wu=((gu={})[Eu.ctrlA]=function(t){return xu.isEditableElement(t)&&wu.select(t),yu.resolve()},gu[Eu.backspace]=function(t){var e,n,i;return xu.isTextEditableElementAndEditingAllowed(t)&&(e=wu.getSelectionStart(t),n=wu.getSelectionEnd(t),i=xu.getElementValue(t).replace(/\r\n/g,"\n"),n===e?0<e&&Bu(t,i.substring(0,e-1)+i.substring(n,i.length),e-1):Bu(t,i.substring(0,e)+i.substring(n,i.length),e)),xu.isContentEditableElement(t)&&wu.deleteSelectionContents(t),yu.resolve()},gu[Eu.delete]=function(t){var e,n,i;return xu.isTextEditableElementAndEditingAllowed(t)&&(e=wu.getSelectionStart(t),n=wu.getSelectionEnd(t),i=xu.getElementValue(t).replace(/\r\n/g,"\n"),n===e?e<i.length&&Bu(t,i.substring(0,e)+i.substring(n+1,i.length),e):Bu(t,i.substring(0,e)+i.substring(n,i.length),e)),xu.isContentEditableElement(t)&&wu.deleteSelectionContents(t),yu.resolve()},gu[Eu.left]=function(t){var e,n,i,o,r=null;return xu.isSelectElement(t)&&Cu.switchOptionsByKeys(t,"left"),Yu(t)?Ru(t,!0):(xu.isTextEditableElement(t)&&(e=(r=wu.getSelectionStart(t)||0)===wu.getSelectionEnd(t)?r-1:r,wu.select(t,e,e),Du(t)),xu.isContentEditableElement(t)&&(r=wu.getSelectionStart(t))!==wu.getSelectionEnd(t)&&(n=wu.getSelectionByElement(t),o={node:(i=wu.hasInverseSelectionContentEditable(t))?n.focusNode:n.anchorNode,offset:i?n.focusOffset:n.anchorOffset},wu.selectByNodesAndOffsets(o,o,!0)),yu.resolve())},gu[Eu.right]=function(t){var e,n,i,o,r=null,s=null;return xu.isSelectElement(t)&&Cu.switchOptionsByKeys(t,"right"),Yu(t)?Ru(t,!1):(xu.isTextEditableElement(t)&&(e=(r=wu.getSelectionStart(t))===(s=wu.getSelectionEnd(t))?s+1:s,r===xu.getElementValue(t).length&&(e=r),wu.select(t,e,e),Du(t)),xu.isContentEditableElement(t)&&(r=wu.getSelectionStart(t))!==(s=wu.getSelectionEnd(t))&&(n=wu.getSelectionByElement(t),o={node:(i=wu.hasInverseSelectionContentEditable(t))?n.anchorNode:n.focusNode,offset:i?n.anchorOffset:n.focusOffset},wu.selectByNodesAndOffsets(o,o,!0)),yu.resolve())},gu[Eu.up]=function(t){return xu.isSelectElement(t)&&Cu.switchOptionsByKeys(t,"up"),Yu(t)?Ru(t,!0):bu.isWebKit&&xu.isInputElement(t)?Ou(t):(xu.isTextAreaElement(t)&&Uu(t,!1),yu.resolve())},gu[Eu.down]=function(t){return xu.isSelectElement(t)&&Cu.switchOptionsByKeys(t,"down"),Yu(t)?Ru(t,!1):bu.isWebKit&&xu.isInputElement(t)?Nu(t):(xu.isTextAreaElement(t)&&Iu(t,!1),yu.resolve())},gu[Eu.shiftLeft]=function(t){var e,n;return xu.isTextEditableElement(t)&&((e=wu.getSelectionStart(t))===(n=wu.getSelectionEnd(t))||wu.hasInverseSelection(t)?wu.select(t,n,Math.max(e-1,0)):wu.select(t,e,Math.max(n-1,0)),Du(t)),yu.resolve()},gu[Eu.shiftRight]=function(t){var e,n,i;return xu.isTextEditableElement(t)&&(e=wu.getSelectionStart(t),n=wu.getSelectionEnd(t),i=xu.getElementValue(t).length,e!==n&&wu.hasInverseSelection(t)?wu.select(t,n,Math.min(e+1,i)):wu.select(t,e,Math.min(n+1,i)),Du(t)),yu.resolve()},gu[Eu.shiftUp]=function(t){return bu.isWebKit&&xu.isInputElement(t)?Fu(t):(xu.isTextAreaElement(t)&&Uu(t,!0),yu.resolve())},gu[Eu.shiftDown]=function(t){return bu.isWebKit&&xu.isInputElement(t)?Lu(t):(xu.isTextAreaElement(t)&&Iu(t,!0),yu.resolve())},gu[Eu.shiftHome]=Fu,gu[Eu.shiftEnd]=Lu,gu[Eu.home]=Ou,gu[Eu.end]=Nu,gu[Eu.enter]=function(t){var e,n,i,o,r,s;return xu.isSelectElement(t)&&Cu.collapseOptionList(),xu.isInputElement(t)?(bu.isIE||_u.processElementChanging(t),(e=xu.getParents(t,"form")[0])&&function(t,e){var n=t.querySelectorAll("input, button"),i=null,o=null;for(o=0;o<n.length;o++)if(!i&&"submit"===n[o].type&&!n[o].disabled){i=n[o];break}if(i)Su.click(i);else if(xu.blocksImplicitSubmission(e)){for(var r=t.getElementsByTagName("input"),s=[],o=0;o<r.length;o++)xu.blocksImplicitSubmission(r[o])&&s.push(r[o]);1===s.length&&s[0]===e&&e.validity.valid&&Su.submit(t)&&t.submit()}}(e,t)):xu.isTextAreaElement(t)?(n=wu.getSelectionStart(t),o=(i=xu.getTextAreaValue(t)).substring(0,n),r=i.substring(n),s=n+1,Bu(t,o+String.fromCharCode(10)+r,s)):t.tagName&&xu.isAnchorElement(t)&&Su.click(t),yu.resolve()},gu[Eu.tab]=function(t){return Ku(t,!1)},gu[Eu.shiftTab]=function(t){return Ku(t,!0)},gu[Eu.esc]=function(t){return xu.isSelectElement(t)&&Cu.collapseOptionList(),yu.resolve()},gu),Vu=p.Promise,Xu=p.utils.browser,Hu=p.eventSandbox.message,qu=p.nativeMethods,Gu="automation|press|request",zu="automation|press|response";Hu.on(Hu.SERVICE_MSG_RECEIVED_EVENT,function(t){t.message.cmd===Gu&&(p.on(p.EVENTS.beforeUnload,function(){return Hu.sendServiceMsg({cmd:zu},t.source)}),new ju(t.message.keyCombinations,t.message.options).run().then(function(){return Hu.sendServiceMsg({cmd:zu},t.source)}))});var ju=($u._getKeyPressSimulators=function(t){var e=function(t){for(var e=t.slice(),n=0;n<t.length;n++){var i=t[n];if("shift"===i.toLowerCase()){var o=t[n+1];if(!o)continue;g.KEY_MAPS.shiftMap[o]?t[n+1]=g.KEY_MAPS.shiftMap[o]:g.KEY_MAPS.reversedShiftMap[o]&&(e[n+1]=g.KEY_MAPS.reversedShiftMap[o])}!g.KEY_MAPS.shiftMap[i]||t[n-1]&&"shift"===t[n-1].toLowerCase()||(t[n]=g.KEY_MAPS.shiftMap[i],t.splice(n,0,"shift"),e.splice(n,0,"shift"),n++)}return{actualKeys:t,eventKeyProperties:e}}(g.getKeyArray(t)),n=e.actualKeys,i=e.eventKeyProperties;return g.arrayUtils.map(n,function(t,e){return new pu(t,i[e])})},$u._getShortcuts=function(t){for(var e=g.getKeyArray(t.toLowerCase()),n=[],i=[],o=[],r=0;r<e.length;r++)for(i.push(e[r]),o=i.slice();o.length;){var s=o.join("+");Wu[s]?(n.push(s),i=o=[]):o.shift()}return n},$u._getShortcutHandlers=function(t){for(var e,n,i,o=$u._getShortcuts(t.toLowerCase()),r={},s="",l=0;l<o.length;l++)e=o[l],n=t.indexOf(e),i=e.length,r[s+=t.substring(0,n+i)]=Wu[e],t=t.substring(n+i);return r},$u.prototype._down=function(t){this.pressedKeyString+=(this.pressedKeyString?"+":"")+t.key;var e=!t.down(this.modifiersState);return Vu.resolve(e)},$u.prototype._press=function(t,e){var n=this;if(e&&!this.isSelectElement)return g.delay(this.automationSettings.keyActionStepDelay);var i=this.shortcutHandlers[this.pressedKeyString],o=!1;return i&&!Xu.isFirefox&&"enter"!==t.key||(o=!t.press(this.modifiersState)),o&&!this.isSelectElement||!i?g.delay(this.automationSettings.keyActionStepDelay):i(ru(this.topSameDomainDocument)).then(function(){return g.delay(n.automationSettings.keyActionStepDelay)})},$u.prototype._up=function(t){return t.up(this.modifiersState),g.delay(this.automationSettings.keyActionStepDelay)},$u.prototype._runCombination=function(t){var n=this;this.modifiersState={ctrl:!1,alt:!1,shift:!1,meta:!1},this.isSelectElement=g.domUtils.isSelectElement(ru(this.topSameDomainDocument)),this.pressedKeyString="",this.shortcutHandlers=$u._getShortcutHandlers(t);var e=$u._getKeyPressSimulators(t);return g.promiseUtils.each(e,function(e){return n._down(e).then(function(t){return n._press(e,t)})}).then(function(){return g.arrayUtils.reverse(e),g.promiseUtils.each(e,function(t){return n._up(t)})})},$u.prototype.run=function(){var e=this,t=g.domUtils.getActiveElement(),n=g.domUtils.isIframeElement(t);if(!Ir(fh)&&n&&qu.contentWindowGetter.call(t)){var i={cmd:Gu,keyCombinations:this.keyCombinations,options:this.options};return g.sendRequestToFrame(i,zu,qu.contentWindowGetter.call(t))}return g.promiseUtils.each(this.keyCombinations,function(t){return e._runCombination(t).then(function(){return g.delay(e.automationSettings.keyActionStepDelay)})})},$u);function $u(t,e){this.keyCombinations=t,this.isSelectElement=!1,this.pressedKeyString="",this.modifiersState=null,this.shortcutHandlers=null,this.topSameDomainDocument=g.domUtils.getTopSameDomainWindow(fh).document,this.automationSettings=new Dt(e.speed),this.options=e}var Qu,Zu=p.Promise,Ju=p.utils.extend,tc=p.utils.browser,ec=p.eventSandbox.eventSimulator,nc=y.domUtils,ic=y.eventUtils,oc=y.delay,rc=(_(sc,Qu=Ps),sc.prototype._mousedown=function(t){var e=this;return gs.rightButtonDown().then(function(){return e.eventState.activeElementBeforeMouseDown=nc.getActiveElement(),e.eventState.simulateDefaultBehavior=ec.mousedown(t.element,t.options),e._focus(t)})},sc.prototype._focus=function(t){return!1===this.simulateDefaultBehavior?Ot():Xs(nc.isContentEditableElement(this.element)?this.element:t.element,!tc.isIE||this.eventState.activeElementBeforeMouseDown===nc.getActiveElement(),this.caretPos).then(Ot)},sc.prototype._mouseup=function(e){var t=this;return gs.buttonUp().then(function(){return t._getElementForEvent(e)}).then(function(t){return ec.mouseup(t,e.options)})},sc.prototype._contextmenu=function(e){return this._getElementForEvent(e).then(function(t){ec.contextmenu(t,e.options),nc.isElementFocusable(t)||qs(t)})},sc.prototype.run=function(t){var o=this,r=null;return this._ensureElement(t).then(function(t){var e=t.element,n=t.clientPoint,i=t.devicePoint;return r={point:n,element:e,options:Ju({clientX:n.x,clientY:n.y,screenX:i.x,screenY:i.y,button:ic.BUTTON.right},o.modifiers)},Zu.all([oc(o.automationSettings.mouseActionStepDelay),o._mousedown(r)])}).then(function(){return o._mouseup(r)}).then(function(){return o._contextmenu(r)})},sc);function sc(t,e){var n=Qu.call(this,t,e,fh,gs)||this;return n.modifiers=e.modifiers,n.caretPos=e.caretPos,n.eventState={simulateDefaultBehavior:!0,activeElementBeforeMouseDown:null},n}var lc=p.utils.browser,ac=y.domUtils,uc=y.positionUtils,cc=y.styleUtils,hc=y.contentEditable,fc=y.arrayUtils,dc=["direction","font-family","font-size","font-size-adjust","font-variant","font-weight","font-style","letter-spacing","line-height","text-align","text-indent","text-transform","word-wrap","word-spacing","padding-top","padding-left","padding-right","padding-bottom","margin-top","margin-left","margin-right","margin-bottom","border-top-width","border-left-width","border-right-width","border-bottom-width"];function mc(t,e){var n,i,o,r,s,l=cc.getBordersWidth(t),a=uc.getOffsetPosition(t),u=t.scrollHeight||t.getBoundingClientRect().height,c=Math.ceil(e.left),h=Math.ceil(e.top),f=Math.floor(e.bottom);return ac.isTextAreaElement(t)||(i=(n=uc.offsetToClientCoords({x:a.left,y:a.top})).x+l.left+1,o=n.y+l.top+1,r=n.y+l.top+l.bottom+u,s=n.y+l.top+u-1,c=Math.ceil(c<=n.x?i:e.left),h=Math.ceil(h<=n.y?o:e.top),f=Math.floor(r<=f?s:e.bottom)),{left:c,top:h,bottom:f}}function pc(t){var e=cc.getElementScroll(dh);return{left:t.left+e.left,top:t.top+e.top,bottom:t.bottom+e.top}}function vc(t,e){var n=t.getBoundingClientRect(),i=function(e){var t,n,i,o=dh.body,r=uc.getOffsetPosition(e),s=cc.getElementMargin(e),l=r.top-s.top,a=r.left-s.left,u=dh.createElement("div"),c="white-space:pre-wrap;border-style:solid;";return"absolute"===cc.get(o,"position")&&(t=cc.getElementMargin(o),n=cc.get(o,"left"),i=cc.get(o,"top"),a-=t.left+(parseInt(n.replace("px",""),10)||0),l-=t.top+(parseInt(i.replace("px",""),10)||0)),fc.forEach(dc,function(t){c+="".concat(t,":").concat(cc.get(e,t),";")}),cc.set(u,{cssText:c,position:"absolute",left:a+"px",top:l+"px",width:e.scrollWidth+"px",height:e.scrollHeight+"px"}),p.nativeMethods.nodeTextContentSetter.call(u,ac.getElementValue(e)+" "),o.appendChild(u),u}(t),o=null,r=t.getBoundingClientRect(),s=r.top-n.top,l=r.left-n.left,a=ac.getElementValue(t).length;try{var u=dh.createRange();u.setStart(p.nativeMethods.nodeFirstChildGetter.call(i),Math.min(e,a)),u.setEnd(p.nativeMethods.nodeFirstChildGetter.call(i),Math.min(e+1,a+1)),ac.isTextAreaElement(t)&&(0!==(o=u.getBoundingClientRect()).width||0!==o.height)||(o=u.getClientRects()[0])}catch(t){o=null}return ac.remove(i),o?{width:o.width,height:o.height,top:o.top-s,bottom:o.bottom-s,left:o.left-l,right:o.right-l}:null}function gc(t,e){var n,i,o,r,s,l,a=null;return(a=ac.isContentEditableElement(t)?(o=t,r=e,s=ac.findDocument(o).createRange(),l=hc.calculateNodeAndOffsetByPosition(o,r),s.setStart(l.node,Math.min(l.offset,l.node.length)),s.setEnd(l.node,Math.min(l.offset,l.node.length)),s.getClientRects()[0]):"function"==typeof t.createTextRange?(n=e,(i=t.createTextRange()).collapse(!0),i.moveStart("character",n),i.moveEnd("character",n),i.collapse(!0),i.getBoundingClientRect()):vc(t,e))?{x:(a=pc(a=mc(t,a))).left,y:Math.floor(a.top+(a.bottom-a.top)/2)}:null}function Ec(t,e){var n=ac.isTextEditableElement(t),i=ac.isContentEditableElement(t);return n&&0<ac.getElementValue(t).length||i&&hc.getContentEditableValue(t).length?gc(t,e):uc.findCenter(t)}function yc(t,e,n){var i=ac.findDocument(t).createRange();i.setStart(e,Math.min(n,e.length)),i.setEnd(e,Math.min(n,e.length));var o=i.getClientRects()[0];return o?{x:(o=pc(mc(t,o))).left,y:Math.floor(o.top+(o.bottom-o.top)/2)}:null}var bc,Sc=p.Promise,_c=p.utils.browser,wc=p.utils.featureDetection,Pc=p.eventSandbox.eventSimulator,xc=p.eventSandbox.focusBlur,Cc=y.contentEditable,Ac=y.domUtils,Tc=y.positionUtils,Mc=y.eventUtils,Dc=y.delay,Uc=(_(Ic,bc=Ps),Ic._calculateEventArguments=function(t){var e=Tc.offsetToClientCoords(t);return Tt(e).then(function(t){if(!t)throw new Error(Mt.elementIsInvisibleError);return{element:t,options:{clientX:e.x,clientY:e.y}}})},Ic.prototype._move=function(t){var e=this,n=t.element,i=t.offsetX,o=t.offsetY,r=t.speed,s=new Qo({offsetX:i,offsetY:o,speed:r},!1);return fs.create(n,s,fh,gs).then(function(t){return t.run()}).then(function(){return Dc(e.automationSettings.mouseActionStepDelay)})},Ic.prototype._bindMousedownHandler=function(){var e=this,n=function(t){e.eventState.mousedownPrevented=t.defaultPrevented,Mc.preventDefault(t),Mc.unbind(e.element,"mousedown",n)};Mc.bind(this.element,"mousedown",n)},Ic.prototype._calculateAbsoluteStartPoint=function(){throw new Error("Not implemented")},Ic.prototype._calculateAbsoluteEndPoint=function(){throw new Error("Not implemented")},Ic.prototype._moveToPoint=function(t){!function(t,e){if(ac.isEditableElement(t)){var n=ac.isTextAreaElement(t);if(!ac.isInputElement(t)||!(lc.isFirefox||lc.isIE&&10<lc.version)){var i=uc.getOffsetPosition(t),o=cc.getBordersWidth(t),r=cc.getElementScroll(t),s=e.x-i.left-o.left,l=e.y-i.top-o.top,a=null;if(n)return l<r.top&&(a=l),l>t.clientHeight+r.top&&(a=l-t.clientHeight),null!==a&&cc.setScrollTop(t,Math.round(a));s<r.left&&(a=s),s>t.clientWidth+r.left&&(a=s-t.clientWidth),null!==a&&cc.setScrollLeft(t,Math.round(a))}}}(this.element,t),this.clientPoint=function(t,e){var n=ac.isTextEditableElement(t),i=ac.isInputElement(t);if(!n&&!ac.isContentEditableElement(t))return e;var o=uc.getOffsetPosition(t),r=cc.getBordersWidth(t),s=cc.getElementScroll(t),l=o.left+r.left+t.clientWidth;return i&&n&&(lc.isFirefox||lc.isIE&&10<lc.version)?{x:Math.min(e.x,l),y:e.y}:{x:e.x-s.left,y:e.y-s.top}}(this.element,t);var e={element:dh.documentElement,offsetX:this.clientPoint.x,offsetY:this.clientPoint.y,speed:this.speed};return this._move(e)},Ic.prototype._mousedown=function(){var n=this;return gs.leftButtonDown().then(function(){return Ic._calculateEventArguments(n.clientPoint)}).then(function(t){n.eventArgs=t;var e=(_c.isWebKit||_c.isIE)&&Ac.isSelectElement(n.element);return e&&n._bindMousedownHandler(),n.eventState.simulateDefaultBehavior=Pc[n.downEvent](n.eventArgs.element,n.eventArgs.options),!1===n.eventState.simulateDefaultBehavior&&(n.eventState.simulateDefaultBehavior=e&&!n.eventState.mousedownPrevented),n._focus()})},Ic.prototype._focus=function(){var n=this;return new Sc(function(t){var e=Ac.isContentEditableElement(n.element)?Cc.findContentEditableParent(n.element):n.element;xc.focus(e,t,!1,!0)})},Ic.prototype._setSelection=function(){throw new Error("Not implemented")},Ic.prototype._mouseup=function(){var e=this;return gs.buttonUp().then(function(){return e._setSelection(),Ic._calculateEventArguments(e.clientPoint)}).then(function(t){e.eventArgs=t,Pc[e.upEvent](e.eventArgs.element,e.eventArgs.options)})},Ic.prototype.run=function(){var t=this;return this.absoluteStartPoint=this._calculateAbsoluteStartPoint(),this.absoluteEndPoint=this._calculateAbsoluteEndPoint(),this._moveToPoint(this.absoluteStartPoint).then(function(){return t._mousedown()}).then(function(){return t._moveToPoint(t.absoluteEndPoint)}).then(function(){return t._mouseup()})},Ic);function Ic(t,e){var n=bc.call(this,t,e,fh,gs)||this;return n.absoluteStartPoint=null,n.absoluteEndPoint=null,n.clientPoint=null,n.speed=e.speed,n.downEvent=wc.isTouchDevice?"touchstart":"mousedown",n.upEvent=wc.isTouchDevice?"touchend":"mouseup",n.eventArgs={options:null,element:null},n.eventState={mousedownPrevented:!1,simulateDefaultBehavior:!0},n}var kc,Bc=y.textSelection,Oc=y.domUtils,Nc=y.positionUtils,Fc=(_(Lc,kc=Uc),Lc.prototype._calculateAbsoluteStartPoint=function(){return Ec(this.element,this.startPos)||Nc.findCenter(this.element)},Lc.prototype._calculateAbsoluteEndPoint=function(){var t=Ec(this.element,this.endPos);return t||(Oc.isContentEditableElement(this.element)?function(t,e,n){for(var i=n<e?1:-1,o=n,r=null;o!==e&&!(r=gc(t,o+=i)););return r=r||gc(t,e)||uc.findCenter(t)}(this.element,this.startPos,this.endPos):Nc.findCenter(this.element))},Lc.prototype._setSelection=function(){var t=Oc.isTextEditableElement(this.element),e=Oc.isContentEditableElement(this.element);(t||e)&&!1!==this.eventState.simulateDefaultBehavior&&Bc.select(this.element,this.startPos,this.endPos)},Lc.prototype.run=function(t){var e=this;return this._ensureElement(t).then(function(){return kc.prototype.run.call(e)})},Lc);function Lc(t,e,n,i){var o=kc.call(this,t,i)||this;return o.startPos=e,o.endPos=n,o}var Yc,Rc=y.textSelection,Kc=y.contentEditable,Wc=y.positionUtils,Vc=(_(Xc,Yc=Uc),Xc.prototype._calculateAbsoluteStartPoint=function(){return yc(this.element,this.startNode,this.startOffset)||Wc.findCenter(this.element)},Xc.prototype._calculateAbsoluteEndPoint=function(){return yc(this.element,this.endNode,this.endOffset)||Wc.findCenter(this.element)},Xc.prototype._setSelection=function(){var t,e;!1!==this.eventState.simulateDefaultBehavior&&(t={node:this.startNode,offset:this.startOffset},e={node:this.endNode,offset:this.endOffset},Rc.selectByNodesAndOffsets(t,e,!0))},Xc);function Xc(t,e,n){var i=Yc.call(this,Kc.getNearestCommonAncestor(t,e),n)||this,o=Kc.getFirstVisiblePosition(t),r=Kc.getLastVisiblePosition(e),s={node:t,offset:o},l={node:e,offset:r},a=Kc.calculatePositionByNodeAndOffset(i.element,s);return Kc.calculatePositionByNodeAndOffset(i.element,l)<a&&(o=Kc.getLastVisiblePosition(t),r=Kc.getFirstVisiblePosition(e)),s=Kc.calculateNodeAndOffsetByPosition(t,o),l=Kc.calculateNodeAndOffsetByPosition(e,r),i.startNode=s.node,i.startOffset=s.offset,i.endNode=l.node,i.endOffset=l.offset,i}var Hc=p.Promise,qc=p.utils.extend,Gc=p.utils.browser,zc=p.eventSandbox.eventSimulator,jc=p.eventSandbox.elementEditingWatcher,$c=y.domUtils,Qc=y.promiseUtils,Zc=y.contentEditable,Jc=y.textSelection,th=y.delay,eh=y.KEY_MAPS.specialKeys,nh=(ih.findTextEditableChild=function(t){var e=null;if(!$c.isEditableElement(t))for(var n=t.querySelectorAll("*"),i=0;i<n.length;i++)if($c.isTextEditableElementAndEditingAllowed(n[i])){e=n[i];break}return e},ih.prototype._calculateEventArguments=function(t){var e=$c.getActiveElement(),n=$c.isContentEditableElement(this.element),i=this.eventArgs.element||this.element;n||e===i||(i=ih.findTextEditableChild(e)||e);var o=qc({keyCode:t?this.currentCharCode:this.currentKeyCode},this.modifiers);return t&&(o.charCode=this.currentCharCode),qc(o,hu(t,this.currentKey,this.currentKeyIdentifier)),{element:i,options:o}},ih.prototype._calculateTargetElement=function(){var t=$c.getActiveElement(),e=$c.isContentEditableElement(this.element);if(e){if(t!==Zc.findContentEditableParent(this.element))return void(this.eventState.skipType=!0)}else if(t!==this.element)return void(this.eventState.skipType=!0);this.element=e?this.element:t},ih.prototype._click=function(t){var e,n=this,i=$c.getActiveElement(),o=$c.isTextEditableElementAndEditingAllowed(this.element),r=$c.isContentEditableElement(this.element);if(i===this.element)return o&&jc.watchElementEditing(this.element),(o||r)&&(e=Jc.getSelectionStart(this.element),isNaN(parseInt(this.caretPos,10))||this.caretPos===e||Jc.select(this.element,this.caretPos,this.caretPos)),Hc.resolve();var s=_t(this.element),l=s.offsetX,a=s.offsetY,u=new zo({offsetX:this.elementChanged?l:this.offsetX,offsetY:this.elementChanged?a:this.offsetY,speed:this.speed,caretPos:this.caretPos,modifiers:this.modifiers});return new xl(this.element,u,fh,gs).run(t).then(function(){return th(n.automationSettings.mouseActionStepDelay)})},ih.prototype._type=function(){var t=this;if(this.eventState.skipType)return Hc.resolve();var e=$c.isContentEditableElement(this.element);return this.replace&&($c.isTextEditableElementAndEditingAllowed(this.element)?Jc.select(this.element):e&&Jc.deleteSelectionContents(this.element,!0)),Qc.whilst(function(){return!t._isTypingFinished()},function(){return t._typingStep()})},ih.prototype._isTypingFinished=function(){return this.currentPos===this.typingText.length},ih.prototype._typingStep=function(){var t=this.typingText.charAt(this.currentPos);return this.currentKeyCode=au(t),this.currentCharCode=this.typingText.charCodeAt(this.currentPos),this.currentKey=this.currentKeyCode===eh.enter?"Enter":t,this.currentKeyIdentifier=cu(this.currentKey),this.ignoreChangeEvent=$c.getElementValue(this.element)===jc.getElementSavedValue(this.element),this._keydown(),this._keypress(),this._keyup()},ih.prototype._keydown=function(){this.eventArgs=this._calculateEventArguments(),this.eventState.simulateKeypress=zc.keydown(this.eventArgs.element,this.eventArgs.options)},ih.prototype._keypress=function(){!1!==this.eventState.simulateKeypress&&(this.eventArgs=this._calculateEventArguments(!0),this.eventState.simulateTypeChar=Gc.isAndroid||zc.keypress(this.eventArgs.element,this.eventArgs.options))},ih.prototype._keyup=function(){var t=this,e=this.eventArgs.element;this.eventArgs=this._calculateEventArguments();var n=$c.isTextEditableElement(this.element),i=$c.isContentEditableElement(this.element),o=this.paste||!n&&!i;return Hc.resolve().then(function(){return o?t._typeAllText(e):t._typeChar(e)}).then(function(){zc.keyup(t.eventArgs.element,t.eventArgs.options),o?t.currentPos=t.typingText.length:t.currentPos++})},ih.prototype._typeChar=function(t){if(!1===this.eventState.simulateKeypress||!1===this.eventState.simulateTypeChar)return this.ignoreChangeEvent&&jc.restartWatchingElementEditing(t),th(this.automationSettings.keyActionStepDelay);var e=this.typingText.charAt(this.currentPos),n=/^\d$/.test(e),i=0===this.currentPos?null:this.typingText.charAt(this.currentPos-1);if($c.isInputElement(t)&&"number"===t.type){var o=Jc.getSelectionStart(t),r=$c.getInputValue(t).length,s=/^\d/.test(this.typingText);if(!n&&(s||!("."===e||"-"===e&&r)||0!==o))return th(this.automationSettings.keyActionStepDelay);n&&("."===i||"-"===i&&!r)&&(e=i+e)}return ja(t,e,null),th(this.automationSettings.keyActionStepDelay)},ih.prototype._typeAllText=function(t){return ja(t,this.typingText,this.caretPos),th(this.automationSettings.keyActionStepDelay)},ih.prototype.run=function(t){var e=this;return this._click(t).then(function(){return e._calculateTargetElement()}).then(function(){return e._type()})},ih);function ih(t,e,n){this.element=ih.findTextEditableChild(t)||t,this.typingText=e.toString(),this.modifiers=n.modifiers,this.caretPos=n.caretPos,this.replace=n.replace,this.paste=n.paste,this.offsetX=n.offsetX,this.offsetY=n.offsetY,this.speed=n.speed,this.automationSettings=new Dt(this.speed),this.elementChanged=t!==this.element,this.currentPos=0,this.currentKeyCode=null,this.currentCharCode=null,this.currentKey=null,this.currentKeyIdentifier=null,this.ignoreChangeEvent=!0,this.eventArgs={options:null,element:null},this.eventState={skipType:!1,simulateKeypress:!0,simulateTypeChar:!0}}var oh=(rh.prototype.run=function(){var i=this;return m.doUpload(this.element,this.paths).then(function(t){if(t.length){var e=g.arrayUtils.map(t,function(t){return t.path}),n=g.arrayUtils.reduce(t,function(t,e){return t.concat(e.resolvedPaths)},[]);throw i.createError(e,n)}})},rh);function rh(t,e,n){this.element=t,this.paths=e,this.createError=n}var sh=y.domUtils,lh=y.contentEditable,ah={};ah.DispatchEvent=t,ah.SetScroll=Ts,ah.ScrollIntoView=Us,ah.Click=xl,ah.SelectChildClick=Gl,ah.DblClick=na,ah.DragToOffset=Ca,ah.DragToElement=Da,ah.Hover=ka,ah.Press=ju,ah.RClick=rc,ah.SelectText=Fc,ah.SelectEditableContent=Vc,ah.Type=nh,ah.Upload=oh,ah.MouseOptions=Ho,ah.ClickOptions=zo,ah.TypeOptions=rr,ah.ERROR_TYPES=Mt,ah.AutomationSettings=Dt,ah.getOffsetOptions=wt,ah.calculateSelectTextArguments=function(t,e){void 0===e&&(e={});var n,i,o,r,s,l,a,u,c,h,f,d=sh.isTextEditableElement(t),m=d?0:lh.getFirstVisiblePosition(t),p=d?sh.getElementValue(t).length:lh.getLastVisiblePosition(t),v=e.startPos?Math.min(e.startPos,p):m,g=void 0===e.endPos||null===e.endPos?p:Math.min(e.endPos,p);return void 0!==e.offset?(g=0<=e.offset?Math.min(e.offset,g):(v=g,Math.max(0,g+e.offset)),{startPos:v,endPos:g}):void 0!==e.startLine?(n=t,i=e,o=sh.getTextAreaValue(n),r=o&&o.length?o.split("\n"):[],s=r.length-1,l=i.startLine?Math.min(i.startLine,s):0,a=r[l]?r[l].length:0,u=i.startPos?Math.min(i.startPos,a):0,c=void 0===i.endLine||null===i.endLine?s:Math.min(i.endLine,s),h=r[c]?r[c].length:0,f=void 0===i.endPos||null===i.endPos?h:Math.min(i.endPos,h),{startPos:sh.getTextareaPositionByLineAndOffset(n,l,0)+u,endPos:sh.getTextareaPositionByLineAndOffset(n,c,0)+f}):{startPos:v,endPos:g}},ah.cursor=gs,ah.getNextFocusableElement=lu,ah.SHORTCUT_TYPE=Eu,ah.getSelectionCoordinatesByPosition=Ec,ah.getElementFromPoint=Tt,ah.MoveAutomation=fs;var uh=p.nativeMethods,ch=p.EVENTS.evalIframeScript;uh.objectDefineProperty(fh,"%testCafeAutomation%",{configurable:!0,value:ah}),p.on(ch,function(t){return hh(uh.contentWindowGetter.call(t.iframe))})}(fh["%hammerhead%"],fh["%hammerhead%"].Promise,fh["%testCafeCore%"],fh["%testCafeUI%"])}(window);